(function(n){"use strict";Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});n.WebSharper={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i of Object.getOwnPropertyNames(n))t[i]=n[i];return Object.setPrototypeOf(t,Object.getPrototypeOf(n)),t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},PrintObject:function(n){var t="{ ",i=!0;for(var r of Object.getOwnPropertyNames(n))i?i=!1:t+=", ",t+=r+" = "+n[r];return t+(i?"}":" }")},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return WebSharper.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:WebSharper.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},MarkResizable:function(n){return Object.defineProperty(n,"resizable",{enumerable:!1,writable:!1,configurable:!1,value:!0}),n},MarkReadOnly:function(n){return Object.defineProperty(n,"readonly",{enumerable:!1,writable:!1,configurable:!1,value:!0}),n},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};n.WebSharper.Runtime.OnLoad(function(){n.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});n.ignore=function(){};n.id=function(n){return n};n.fst=function(n){return n[0]};n.snd=function(n){return n[1]};n.trd=function(n){return n[2]};n.console||(n.console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore})})(self);
/* https://github.com/jonathantneal/closest */
(function(w,p){p=w.Element.prototype
if(!p.matches){p.matches=p.msMatchesSelector||function(s){var m=(this.document||this.ownerDocument).querySelectorAll(s);for(var i=0;m[i]&&m[i]!==e;++i);return!!m[i]}}
if(!p.closest){p.closest=function(s){var e=this;while(e&&e.nodeType==1){if(e.matches(s))return e;e=e.parentNode}return null}}})(self);
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ;b=a.Project12=a.Project12||{};c=b.PersonPets=b.PersonPets||{};d=a.WebSharper=a.WebSharper||{};e=d.Operators=d.Operators||{};f=c.Person=c.Person||{};g=d.Forms=d.Forms||{};h=g.Form=g.Form||{};i=d.JavaScript=d.JavaScript||{};j=i.JS=i.JS||{};k=d.Seq=d.Seq||{};l=c.Todo=c.Todo||{};m=d.Strings=d.Strings||{};n=g.Pervasives=g.Pervasives||{};o=g.Validation=g.Validation||{};p=c.Category=c.Category||{};q=d.Enumerator=d.Enumerator||{};r=d.Obj=d.Obj||{};s=q.T=q.T||{};t=d.UI=d.UI||{};u=t.Doc=t.Doc||{};v=t.View=t.View||{};w=t.HtmlModule=t.HtmlModule||{};x=w.attr=w.attr||{};y=g.View=g.View||{};z=t.Submitter=t.Submitter||{};A=h.Many=h.Many||{};B=A.Collection=A.Collection||{};C=g.Doc=g.Doc||{};D=A.ItemOperations=A.ItemOperations||{};E=A.CollectionWithDefault=A.CollectionWithDefault||{};F=t.Client=t.Client||{};G=F.Templates=F.Templates||{};H=i.Pervasives=i.Pervasives||{};I=g.Fresh=g.Fresh||{};J=t.Var$1=t.Var$1||{};K=d.List=d.List||{};L=K.T=K.T||{};M=g.Result=g.Result||{};N=d.Arrays=d.Arrays||{};O=d.Unchecked=d.Unchecked||{};P=t.Snap=t.Snap||{};Q=t.AttrProxy=t.AttrProxy||{};R=g.ErrorMessage=g.ErrorMessage||{};S=t.Var=t.Var||{};T=g.Attr=g.Attr||{};U=a.EventTarget;V=a.Node;W=d.Collections=d.Collections||{};X=W.Dictionary=W.Dictionary||{};Y=t.ConcreteVar=t.ConcreteVar||{};Z=d.Numeric=d.Numeric||{};_0=t.Docs=t.Docs||{};_1=t.Attrs=t.Attrs||{};_2=t.DomUtility=t.DomUtility||{};_3=t.AttrModule=t.AttrModule||{};_4=t.Array=t.Array||{};_5=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};_6=W.HashSet=W.HashSet||{};_7=a.WindowOrWorkerGlobalScope;_8=a.StartupCode$WebSharper_Forms$Forms=a.StartupCode$WebSharper_Forms$Forms||{};_9=t.Abbrev=t.Abbrev||{};_=_9.Fresh=_9.Fresh||{};$=t.DocElemNode=t.DocElemNode||{};ba=a.CharacterData;bb=t.BindVar=t.BindVar||{};bc=a.Object;bd=t.Elt=t.Elt||{};be=W.DictionaryUtil=W.DictionaryUtil||{};bf=a.Element;bg=G.Prepare=G.Prepare||{};bh=d.Slice=d.Slice||{};bi=W.KeyCollection=W.KeyCollection||{};bj=t.An=t.An||{};bk=F.Settings=F.Settings||{};bl=_9.Mailbox=_9.Mailbox||{};bm=A.Fresh=A.Fresh||{};bn=F.Attrs=F.Attrs||{};bo=bn.Dyn=bn.Dyn||{};bp=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};bq=t.Updates=t.Updates||{};br=F.Docs=F.Docs||{};bs=br.RunState=br.RunState||{};bt=br.NodeSet=br.NodeSet||{};bu=d.Concurrency=d.Concurrency||{};bv=t.Anims=t.Anims||{};bw=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bx=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};by=d.Queue=d.Queue||{};bz=t.String=t.String||{};bA=t.CheckedInput=t.CheckedInput||{};bB=t.DynamicAttrNode=t.DynamicAttrNode||{};bC=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};bD=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bE=t.AppendList=t.AppendList||{};bF=W.HashSetUtil=W.HashSetUtil||{};bG=d.Char=d.Char||{};bH=d.DateUtil=d.DateUtil||{};bI=a.Error;bJ=d.KeyNotFoundException=d.KeyNotFoundException||{};bK=bu.Scheduler=bu.Scheduler||{};bL=t.Easing=t.Easing||{};bM=bu.AsyncBody=bu.AsyncBody||{};bN=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bO=bu.CT=bu.CT||{};bP=_9.HashSet=_9.HashSet||{};bQ=d.CancellationTokenSource=d.CancellationTokenSource||{};bR=br.DomNodes=br.DomNodes||{};bS=d.OperationCanceledException=d.OperationCanceledException||{};bT=d.Lazy=d.Lazy||{};bU=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bV=d.LazyExtensionsProxy=d.LazyExtensionsProxy||{};bW=bV.LazyRecord=bV.LazyRecord||{};bX=d&&d.Runtime;bY=a.console;bZ=a.Date;c.FinalForm=function(){var b0;b0=h.Render(bX.Curried(c.RenderPerson,4),h.Run(function(b1){a.alert("Welcome to you "+b1.firstName+" "+b1.lastName+m.concat("",k.map(function(b2){return", your "+a.String(b2.Category)+" "+b2.name;},b1.pets))+"!");},c.PersonPiglet(f.New("","",[]))));G.LoadLocalTemplates("");u.RunById("main",b0);};c.PersonPiglet=function(b0){return h.WithSubmit(n.op_LessMultiplyGreater(n.op_LessMultiplyGreater(n.op_LessMultiplyGreater(h.Return(bX.Curried3(f.New)),o.IsNotEmpty("Please enter your first name.",h.Yield(b0.firstName))),o.IsNotEmpty("Please enter your last name.",h.Yield(b0.lastName))),h.Many$1(b0.pets,l.New(p.Hobbies,""),c.Todoitem)));};c.RenderPerson=function(b0,b1,b2,b3){return u.Element("section",[Q.Create("class","section")],[u.Element("h1",[Q.Create("class","subtitle")],[u.TextNode("TODO LIST")]),u.Element("div",[Q.Create("class","field")],[u.Element("label",[Q.Create("class","label")],[u.TextNode("First name: "),u.Input([Q.Create("class","input")],b0)]),c.ShowErrorsFor(y.Through$1(b3.view,b0))]),u.Element("div",[Q.Create("class","field")],[u.Element("label",[Q.Create("class","label")],[u.TextNode("Last name: "),u.Input([Q.Create("class","input")],b1)]),c.ShowErrorsFor(y.Through$1(b3.view,b1))]),u.Element("h2",[Q.Create("class","subtitle")],[u.TextNode("Your Daily Schedule")]),u.Element("div",[],[b2.Render(bX.Curried3(function(b4,b5,b6){return u.Element("div",[Q.Create("class","field is-horizontal")],[u.Element("div",[Q.Create("class","field-body")],[c.RenderPet(b5,b6),C.ButtonValidate("Move up",[Q.Create("class","button")],b4.moveUp),C.ButtonValidate("Move down",[Q.Create("class","button")],b4.moveDown),u.Button("Delete",[Q.Create("class","button")],function(){b4["delete"]();}),c.ShowErrorsFor(y.Through$1(b3.view,b6))])]);})),u.Button("Add Item",[Q.Create("class","button")],function(){b2.AddOne();})]),u.Element("div",[],[u.Button("Submit",[Q.Create("class","button")],function(){b3.Trigger();})])]);};c.Todoitem=function(b0){return n.op_LessMultiplyGreater(n.op_LessMultiplyGreater(h.Return(function(b1){return function(b2){return l.New(b1,b2);};}),h.Yield(b0.Category)),o.IsNotEmpty("Please Fill up your schedule.",h.Yield(b0.name)));};c.ShowErrorsFor=function(b0){return u.EmbedView(v.Map(function(b1){var b2;return b1.$==1?(b2=b1.$0,u.Concat(K.ofSeq(k.delay(function(){return k.map(function(b3){return u.Element("b",[Q.Create("style","color:red")],[u.TextNode(b3.message)]);},b2);})))):u.get_Empty();},b0));};c.RenderPet=function(b0,b1){return u.Concat([u.Element("div",[Q.Create("class","field")],[u.Element("label",[Q.Create("class","label")],[u.Radio([],p.Hobbies,b0),u.TextNode(a.String(p.Hobbies))])]),u.Element("div",[Q.Create("class","field")],[u.Element("label",[Q.Create("class","label")],[u.Radio([],p.Career,b0),u.TextNode(a.String(p.Career))])]),u.Element("div",[Q.Create("class","field")],[u.Element("label",[Q.Create("class","label")],[u.Radio([],p.Lifestyle,b0),u.TextNode(a.String(p.Lifestyle))])]),u.Element("div",[Q.Create("class","field")],[u.Input([Q.Create("class","input")],b1)])]);};e.FailWith=function(b0){throw new bI(b0);};e.KeyValue=function(b0){return[b0.K,b0.V];};e.range=function(b0,b1){var b2;b2=1+b1-b0;return b2<=0?[]:k.init(b2,function(b3){return b3+b0;});};f.New=function(b0,b1,b2){return{firstName:b0,lastName:b1,pets:b2};};h.Run=function(b0,b1){return h.Map(function(b2){b0(b2);return b2;},b1);};h.Render=function(b0,b1){var b2;b2=b1.render(b0);return u.Append(u.EmbedView(v.Map(function(){return u.get_Empty();},b1.view)),b2);};h.Return=function(b0){return h.New(I.Id(),v.Const({$:0,$0:b0}),a.id);};h.Yield=function(b0){return h.YieldVar(J.Create$1(b0));};h.Many$1=function(b0,b1,b2){var b3;b3=new E.New(b2,b0,b2(b1),b1);return h.New(I.Id(),b3.out,function(b4){return b4(b3);});};h.WithSubmit=function(b0){var b1;b1=new z.New(b0.view,{$:1,$0:L.Empty});return h.New(I.Id(),b1.view,function(b2){return(b0.render(b2))(b1);});};h.Map=function(b0,b1){return h.MapResult(function(b2){return M.Map(b0,b2);},b1);};h.Apply=function(b0,b1){var b2,b3;return h.New(I.Id(),v.Map2(M.Apply,b0.view,b1.view),(b2=b0.render,(b3=b1.render,function(b4){return b3(b2(b4));})));};h.YieldVar=function(b0){return h.New(b0.get_Id(),v.Map(function(b1){return{$:0,$0:b1};},b0.get_View()),function(b1){return b1(b0);});};h.MapResult=function(b0,b1){return h.New(b1.id,v.Map(b0,b1.view),b1.render);};j.GetFieldValues=function(b0){var b1,b2;b1=[];for(var b3 in b0)b1.push(b0[b3]);return b1;};k.map=function(b0,b1){return{GetEnumerator:function(){var b2;b2=q.Get(b1);return new s.New(null,null,function(b3){return b2.MoveNext()&&(b3.c=b0(b2.Current()),true);},function(){b2.Dispose();});}};};k.delay=function(b0){return{GetEnumerator:function(){return q.Get(b0());}};};k.append=function(b0,b1){return{GetEnumerator:function(){var b2,b3;b2=q.Get(b0);b3=[true];return new s.New(b2,null,function(b4){var b5;return b4.s.MoveNext()?(b4.c=b4.s.Current(),true):(b5=b4.s,!O.Equals(b5,null)?b5.Dispose():void 0,b4.s=null,b3[0]&&(b3[0]=false,b4.s=q.Get(b1),b4.s.MoveNext()?(b4.c=b4.s.Current(),true):(b4.s.Dispose(),b4.s=null,false)));},function(b4){var b5;b5=b4.s;if(!O.Equals(b5,null))b5.Dispose();});}};};k.head=function(b0){var b1;b1=q.Get(b0);try{return b1.MoveNext()?b1.Current():k.insufficient();}finally{if(typeof b1=="object"&&"Dispose"in b1)b1.Dispose();}};k.iter=function(b0,b1){var b2;b2=q.Get(b1);try{while(b2.MoveNext())b0(b2.Current());}finally{if(typeof b2=="object"&&"Dispose"in b2)b2.Dispose();}};k.findIndex=function(b0,b1){var b2;b2=k.tryFindIndex(b0,b1);return b2==null?e.FailWith("KeyNotFoundException"):b2.$0;};k.fold=function(b0,b1,b2){var b3,b4;b3=b1;b4=q.Get(b2);try{while(b4.MoveNext())b3=b0(b3,b4.Current());return b3;}finally{if(typeof b4=="object"&&"Dispose"in b4)b4.Dispose();}};k.tryFindIndex=function(b0,b1){var b2,b3,b4;b2=q.Get(b1);try{b3=true;b4=0;while(b3&&b2.MoveNext())if(b0(b2.Current()))b3=false;else b4=b4+1;return b3?null:{$:1,$0:b4};}finally{if(typeof b2=="object"&&"Dispose"in b2)b2.Dispose();}};k.init=function(b0,b1){return k.take(b0,k.initInfinite(b1));};k.forall=function(b0,b1){return!k.exists(function(b2){return!b0(b2);},b1);};k.take=function(b0,b1){b0<0?k.nonNegative():void 0;return{GetEnumerator:function(){var b2;b2=[q.Get(b1)];return new s.New(0,null,function(b3){var b4;b3.s=b3.s+1;return b3.s>b0?false:(b4=b2[0],O.Equals(b4,null)?k.insufficient():b4.MoveNext()?(b3.c=b4.Current(),b3.s===b0?(b4.Dispose(),b2[0]=null):void 0,true):(b4.Dispose(),b2[0]=null,k.insufficient()));},function(){var b3;b3=b2[0];if(!O.Equals(b3,null))b3.Dispose();});}};};k.initInfinite=function(b0){return{GetEnumerator:function(){return new s.New(0,null,function(b1){b1.c=b0(b1.s);b1.s=b1.s+1;return true;},void 0);}};};k.max=function(b0){var b1,b2,b3;b1=q.Get(b0);try{if(!b1.MoveNext())k.seqEmpty();b2=b1.Current();while(b1.MoveNext()){b3=b1.Current();if(O.Compare(b3,b2)===1)b2=b3;}return b2;}finally{if(typeof b1=="object"&&"Dispose"in b1)b1.Dispose();}};k.exists=function(b0,b1){var b2,b3;b2=q.Get(b1);try{b3=false;while(!b3&&b2.MoveNext())b3=b0(b2.Current());return b3;}finally{if(typeof b2=="object"&&"Dispose"in b2)b2.Dispose();}};k.seqEmpty=function(){return e.FailWith("The input sequence was empty.");};l.New=function(b0,b1){return{Category:b0,name:b1};};m.concat=function(b0,b1){return N.ofSeq(b1).join(b0);};m.SplitChars=function(b0,b1,b2){return m.Split(b0,new a.RegExp("["+m.RegexEscape(b1.join(""))+"]"),b2);};m.StartsWith=function(b0,b1){return b0.substring(0,b1.length)==b1;};m.Split=function(b0,b1,b2){return b2===1?N.filter(function(b3){return b3!=="";},m.SplitWith(b0,b1)):m.SplitWith(b0,b1);};m.RegexEscape=function(b0){return b0.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};m.forall=function(b0,b1){return k.forall(b0,m.protect(b1));};m.SplitWith=function(b0,b1){return b0.split(b1);};m.protect=function(b0){return b0==null?"":b0;};n.op_LessMultiplyGreater=function(b0,b1){return h.Apply(b0,b1);};o.IsNotEmpty=function(b0,b1){return o.Is(function(b2){return b2!="";},b0,b1);};o.Is=function(b0,b1,b2){return h.MapResult(function(b3){return b3.$==1?b3:b0(b3.$0)?b3:{$:1,$0:K.ofArray([new R.New(b2.id,b1)])};},b2);};p=c.Category=bX.Class({toString:function(){return this.$==1?"Career":this.$==2?"Lifestyle":"Hobbies";}},null,p);p.Hobbies=new p({$:0});p.Career=new p({$:1});p.Lifestyle=new p({$:2});q.Get=function(b0){return b0 instanceof a.Array?q.ArrayEnumerator(b0):O.Equals(typeof b0,"string")?q.StringEnumerator(b0):b0.GetEnumerator();};q.ArrayEnumerator=function(b0){return new s.New(0,null,function(b1){var b2;b2=b1.s;return b2<N.length(b0)&&(b1.c=N.get(b0,b2),b1.s=b2+1,true);},void 0);};q.StringEnumerator=function(b0){return new s.New(0,null,function(b1){var b2;b2=b1.s;return b2<b0.length&&(b1.c=b0[b2],b1.s=b2+1,true);},void 0);};q.Get0=function(b0){return b0 instanceof a.Array?q.ArrayEnumerator(b0):O.Equals(typeof b0,"string")?q.StringEnumerator(b0):"GetEnumerator0"in b0?b0.GetEnumerator0():b0.GetEnumerator();};r=d.Obj=bX.Class({Equals:function(b0){return this===b0;},GetHashCode:function(){return -1;}},null,r);r.New=bX.Ctor(function(){},r);s=q.T=bX.Class({Dispose:function(){if(this.d)this.d(this);},MoveNext:function(){var b0;b0=this.n(this);this.e=b0?1:2;return b0;},Current:function(){return this.e===1?this.c:this.e===0?e.FailWith("Enumeration has not started. Call MoveNext."):e.FailWith("Enumeration already finished.");}},r,s);s.New=bX.Ctor(function(b0,b1,b2,b3){r.New.call(this);this.s=b0;this.c=b1;this.n=b2;this.d=b3;this.e=0;},s);h.New=function(b0,b1,b2){return{id:b0,view:b1,render:b2};};u=t.Doc=bX.Class({},r,u);u.Append=function(b0,b1){return u.Mk({$:0,$0:b0.docNode,$1:b1.docNode},v.Map2Unit(b0.updates,b1.updates));};u.get_Empty=function(){return u.Mk(null,v.Const());};u.RunById=function(b0,b1){var b2;b2=self.document.getElementById(b0);if(O.Equals(b2,null))e.FailWith("invalid id: "+b0);else u.Run(b2,b1);};u.Mk=function(b0,b1){return new u.New(b0,b1);};u.EmbedView=function(b0){var b1;b1=_0.CreateEmbedNode();return u.Mk({$:2,$0:b1},v.Map(a.ignore,v.Bind(function(b2){_0.UpdateEmbedNode(b1,b2.docNode);return b2.updates;},b0)));};u.TextNode=function(b0){return u.Mk({$:5,$0:self.document.createTextNode(b0)},v.Const());};u.Input=function(b0,b1){return u.InputInternal("input",function(){return k.append(b0,[_3.Value(b1)]);});};u.Concat=function(b0){var b1;b1=_4.ofSeqNonCopying(b0);return _4.TreeReduce(u.get_Empty(),u.Append,b1);};u.Button=function(b0,b1,b2){var b3;b3=Q.Concat(b1);return bd.New(u.Clickable("button",b2),b3,u.TextNode(b0));};u.Run=function(b0,b1){_0.LinkElement(b0,b1.docNode);u.RunInPlace(false,b0,b1);};u.Element=function(b0,b1,b2){var b3,b4;b3=Q.Concat(b1);b4=u.Concat(b2);return bd.New(self.document.createElement(b0),b3,b4);};u.InputInternal=function(b0,b1){var b2;b2=self.document.createElement(b0);return bd.New(b2,Q.Concat(b1(b2)),u.get_Empty());};u.ConvertBy=function(b0,b1,b2){return u.Flatten(v.MapSeqCachedBy(b0,b1,b2));};u.Radio=function(b0,b1,b2){var b3,b4;b3=self.document.createElement("input");b3.addEventListener("click",function(){return b2.Set(b1);},false);b4=_3.DynamicProp("checked",v.Map(function(b5){return O.Equals(b5,b1);},b2.get_View()));return bd.New(b3,Q.Concat(K.append(K.ofArray([Q.Create("type","radio"),Q.Create("name",b2.get_Id()),b4]),K.ofSeq(b0))),u.get_Empty());};u.Clickable=function(b0,b1){var b2;b2=self.document.createElement(b0);b2.addEventListener("click",function(b3){b3.preventDefault();return b1();},false);return b2;};u.RunInPlace=function(b0,b1,b2){var b3;b3=_0.CreateRunState(b1,b2.docNode);v.Sink(bj.get_UseAnimations()||bk.BatchUpdatesEnabled()?bl.StartProcessor(_0.PerformAnimatedUpdate(b0,b3,b2.docNode)):function(){_0.PerformSyncUpdate(b0,b3,b2.docNode);},b2.updates);};u.Flatten=function(b0){return u.EmbedView(v.Map(u.Concat,b0));};u.New=bX.Ctor(function(b0,b1){r.New.call(this);this.docNode=b0;this.updates=b1;},u);v.Map=function(b0,b1){return v.CreateLazy(function(){return P.Map(b0,b1());});};v.Const=function(b0){var b1;b1=P.New({$:0,$0:b0});return function(){return b1;};};v.Map2Unit=function(b0,b1){return v.CreateLazy(function(){return P.Map2Unit(b0(),b1());});};v.CreateLazy=function(b0){var b1;b1={c:null,o:b0};return function(){var b2,b3;b2=b1.c;return b2===null?(b2=b1.o(),b1.c=b2,(b3=b2.s,b3!=null&&b3.$==0)?b1.o=null:P.WhenObsoleteRun(b2,function(){b1.c=null;}),b2):b2;};};v.Map2=function(b0,b1,b2){return v.CreateLazy(function(){return P.Map2(b0,b1(),b2());});};v.Bind=function(b0,b1){return v.Join(v.Map(b0,b1));};v.SnapshotOn=function(b0,b1,b2){var b3;b3=P.New({$:2,$0:b0,$1:[]});return v.CreateLazy(function(){return b3.s==null?P.SnapshotOn(b1(),b2()):(P.WhenObsolete(b1(),b3),b3);});};v.Join=function(b0){return v.CreateLazy(function(){return P.Join(b0());});};v.MapSeqCachedBy=function(b0,b1,b2){var b3;b3=[new X.New$5()];return v.Map(function(b4){var b5,b6,b7;b5=b3[0];b6=new X.New$5();b7=_4.mapInPlace(function(b8){var b9,b_;b9=b0(b8);b_=b5.ContainsKey(b9)?b5.Item(b9):b1(b8);b6.set_Item(b9,b_);return b_;},N.ofSeq(b4));b3[0]=b6;return b7;},b2);};v.Sink=function(b0,b1){function b2(){P.WhenRun(b1(),b0,function(){bu.scheduler().Fork(b2);});}bu.scheduler().Fork(b2);};x=w.attr=bX.Class({},r,x);y.Through$1=function(b0,b1){return v.Map(function(b2){return b2.$==1?{$:1,$0:K.filter(function(b3){return b3.id==b1.get_Id();},b2.$0)}:b2;},b0);};z=t.Submitter=bX.Class({Trigger:function(){this["var"].Set(null);}},r,z);z.New=bX.Ctor(function(b0,b1){r.New.call(this);this.input=b0;this["var"]=J.Create();this.view=v.SnapshotOn(b1,this["var"].get_View(),this.input);},z);B=A.Collection=bX.Class({Render:function(b0){function b1(b3,b4,b5){return b5;}function b2(b3,b4,b5){return b3.render(b0(b4));}return u.ConvertBy(function(b3){return b1(b3[0],b3[1],b3[2]);},function(b3){return b2(b3[0],b3[1],b3[2]);},this.changesView);},add:function(b0){this.arr.push(this.mk(b0));J.Update(this["var"],a.id);},mk:function(b0){var b1,b2,b3,b4,b5,b6,b7,b8,b9;function b_(b$,ca,cb){return b2===cb;}b1=this;b2=(bm.Int())();b3=function(b$){return k.findIndex(function(ca){return b_(ca[0],ca[1],ca[2]);},b$);};b4=v.Map(b3,this["var"].get_View());b5=new z.New(v.Map(function(b$){return b$===0?{$:1,$0:L.Empty}:{$:0,$0:true};},b4),N.length(this.arr)===0?{$:1,$0:L.Empty}:{$:0,$0:false});b6=v.Map(function(b$){var ca;if(b$.$==0)if(b$.$0){ca=b3(b1.arr);A["List`1.Swap"](b1.arr,ca,ca-1);J.Update(b1["var"],a.id);}},b5.view);b7=new z.New(v.Map(function(b$){return b$===N.length(b1.arr)-1?{$:1,$0:L.Empty}:{$:0,$0:true};},b4),{$:1,$0:L.Empty});b8=v.Map(function(b$){var ca;if(b$.$==0)if(b$.$0){ca=b3(b1.arr);A["List`1.Swap"](b1.arr,ca,ca+1);J.Update(b1["var"],a.id);}},b7.view);b9=this.p(b0);return[h.New(b9.id,v.Map2(a.id,b9.view,v.Map2(function(){return null;},b6,b8)),b9.render),new D.New(function(){var b$,ca;b$=b1.arr;ca=b3(b1.arr);b$.splice.apply(b$,[ca,1]);J.Update(b1["var"],a.id);},b5,b7),b2];},fst3:a.id},r,B);B.New=bX.Ctor(function(b0,b1,b2){var b3,b4,b5;function b6(b7){return b3.mk(b7);}b3=this;r.New.call(this);this.p=b0;this.adder=b2;this.arr=bX.MarkResizable([]);this["var"]=J.Create$1(this.arr);k.iter((b4=(b5=this.arr,function(b7){b5.push(b7);}),function(b7){return b4(b6(b7));}),b1);this.changesView=v.Bind(function(b7){var b8;b8=b7.slice();return _4.MapTreeReduce(function(b9){return v.Map(function(){return[b9];},b3.fst3(b9[0],b9[1],b9[2]).view);},v.Const([]),function(b9,b_){return v.Map2(k.append,b9,b_);},b8);},this["var"].get_View());this.out=v.Bind(function(b7){var b8,b9,b_;function b$(cb,cc,cd){function ce(cf){return[cf];}return v.Map(function(cf){return M.Map(ce,cf);},cb.view);}function ca(cb,cc){return M.Append(k.append,cb,cc);}b8=b7.slice();b9=v.Const({$:0,$0:[]});b_=(bX.Curried3(v.Map2))(ca);return _4.MapTreeReduce(function(cb){return b$(cb[0],cb[1],cb[2]);},b9,function(cb,cc){return(b_(cb))(cc);},b8);},this["var"].get_View());},B);C.ButtonValidate=function(b0,b1,b2){return u.Element("button",k.append([T.SubmitterValidate(b2)],b1),[u.TextNode(b0)]);};D=A.ItemOperations=bX.Class({},r,D);D.New=bX.Ctor(function(b0,b1,b2){r.New.call(this);this["delete"]=b0;this.moveUp=b1;this.moveDown=b2;},D);E=A.CollectionWithDefault=bX.Class({AddOne:function(){this.add(this["default"]);}},B,E);E.New=bX.Ctor(function(b0,b1,b2,b3){B.New.call(this,b0,b1,b2);this["default"]=b3;},E);G.LoadLocalTemplates=function(b0){!G.LocalTemplatesLoaded()?(G.set_LocalTemplatesLoaded(true),G.LoadNestedTemplates(self.document.body,"")):void 0;G.LoadedTemplates().set_Item(b0,G.LoadedTemplateFile(""));};G.LocalTemplatesLoaded=function(){_5.$cctor();return _5.LocalTemplatesLoaded;};G.set_LocalTemplatesLoaded=function(b0){_5.$cctor();_5.LocalTemplatesLoaded=b0;};G.LoadNestedTemplates=function(b0,b1){var b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl;function b2(cm){var cn,co;if(!b3.ContainsKey(cm)){cn=(co=null,[b4.TryGetValue(cm,{get:function(){return co;},set:function(cp){co=cp;}}),co]);if(cn[0]){cl.SAdd(cm);b4.RemoveKey(cm);G.PrepareTemplateStrict(b1,{$:1,$0:cm},cn[1],{$:1,$0:b2});}else bY.warn(cl.Contains(cm)?"Encountered loop when instantiating "+cm:"Local template does not exist: "+cm);}}b3=G.LoadedTemplateFile(b1);b4=new X.New$5();b5=b0.querySelectorAll("[ws-template]");for(b6=0,b7=b5.length-1;b6<=b7;b6++){b8=b5[b6];b9=b8.getAttribute("ws-template").toLowerCase();b8.removeAttribute("ws-template");b4.set_Item(b9,G.FakeRootSingle(b8));}b_=b0.querySelectorAll("[ws-children-template]");for(b$=0,ca=b_.length-1;b$<=ca;b$++){cb=b_[b$];cc=cb.getAttribute("ws-children-template").toLowerCase();cb.removeAttribute("ws-children-template");b4.set_Item(cc,G.FakeRoot(cb));}cd=b0.querySelectorAll("template[id]");for(ce=0,cf=cd.length-1;ce<=cf;ce++){cg=cd[ce];b4.set_Item(cg.getAttribute("id").toLowerCase(),G.FakeRootFromHTMLTemplate(cg));}ch=b0.querySelectorAll("template[name]");for(ci=0,cj=ch.length-1;ci<=cj;ci++){ck=ch[ci];b4.set_Item(ck.getAttribute("name").toLowerCase(),G.FakeRootFromHTMLTemplate(ck));}cl=new _6.New$3();while(b4.count>0)b2(k.head(b4.Keys()));};G.LoadedTemplates=function(){_5.$cctor();return _5.LoadedTemplates;};G.LoadedTemplateFile=function(b0){var b1,b2,b3;b1=(b2=null,[G.LoadedTemplates().TryGetValue(b0,{get:function(){return b2;},set:function(b4){b2=b4;}}),b2]);return b1[0]?b1[1]:(b3=new X.New$5(),(G.LoadedTemplates().set_Item(b0,b3),b3));};G.FakeRootSingle=function(b0){var b1,b2,b3,b4;b0.removeAttribute("ws-template");b1=b0.getAttribute("ws-replace");if(b1==null);else{b0.removeAttribute("ws-replace");b2=b0.parentNode;O.Equals(b2,null)?void 0:(b3=self.document.createElement(b0.tagName),b3.setAttribute("ws-replace",b1),b2.replaceChild(b3,b0));}b4=self.document.createElement("div");b4.appendChild(b0);return b4;};G.FakeRoot=function(b0){var b1;b1=self.document.createElement("div");while(b0.hasChildNodes())b1.appendChild(b0.firstChild);return b1;};G.FakeRootFromHTMLTemplate=function(b0){var b1,b2,b3,b4;b1=self.document.createElement("div");b2=b0.content;for(b3=0,b4=b2.childNodes.length-1;b3<=b4;b3++)b1.appendChild(b2.childNodes[b3].cloneNode(true));return b1;};G.PrepareTemplateStrict=function(b0,b1,b2,b3){var b4,b5;function b6(ca,cb){var cc,cd,ce,cf,cg,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC;function ch(cD){}while(true)switch(ca){case 0:if(cb!==null){cc=cb.nextSibling;if(O.Equals(cb.nodeType,V.TEXT_NODE))bg.convertTextNode(cb);else if(O.Equals(cb.nodeType,V.ELEMENT_NODE))b8(cb);cb=cc;}else return null;break;case 1:ci=bh.string(cb.nodeName,{$:1,$0:3},null).toLowerCase();cj=(cd=ci.indexOf("."),cd===-1?[b0,ci]:[bh.string(ci,null,{$:1,$0:cd-1}),bh.string(ci,{$:1,$0:cd+1},null)]);ck=cj[1];cl=cj[0];if(cl!=""&&!G.LoadedTemplates().ContainsKey(cl))return bg.failNotLoaded(ck);else{if(cl==""&&b3!=null)b3.$0(ck);cm=G.LoadedTemplates().Item(cl);if(!cm.ContainsKey(ck))return bg.failNotLoaded(ck);else{cn=cm.Item(ck);co=cn.cloneNode(true);cp=new _6.New$3();cq=new X.New$5();cr=cb.attributes;for(cs=0,ct=cr.length-1;cs<=ct;cs++){cu=cr.item(cs).name.toLowerCase();cq.set_Item(cu,(cv=cr.item(cs).nodeValue,cv==""?cu:cv.toLowerCase()));if(!cp.SAdd(cu))bY.warn("Hole mapped twice",cu);}for(cw=0,cx=cb.childNodes.length-1;cw<=cx;cw++){cy=cb.childNodes[cw];if(O.Equals(cy.nodeType,V.ELEMENT_NODE))!cp.SAdd(cy.nodeName.toLowerCase())?bY.warn("Hole filled twice",ck):void 0;}cz=cb.childNodes.length===1&&O.Equals(cb.firstChild.nodeType,V.TEXT_NODE);if(cz){cf=bg.fillTextHole(co,cb.firstChild.textContent,ck);((function(cD){return function(cE){if(cE!=null)cD(cE.$0);};}((cg=function(cD){return function(cE){return cD.SAdd(cE);};}(cp),function(cD){return ch(cg(cD));})))(cf));}bg.removeHolesExcept(co,cp);if(!cz){for(cA=0,cB=cb.childNodes.length-1;cA<=cB;cA++){cC=cb.childNodes[cA];if(O.Equals(cC.nodeType,V.ELEMENT_NODE))cC.hasAttributes()?bg.fillInstanceAttrs(co,cC):b7(co,cC);}}bg.mapHoles(co,cq);bg.fill(co,cb.parentNode,cb);cb.parentNode.removeChild(cb);return;}}break;}}function b7(ca,cb){var cc,cd,cf,cg;function ce(ch,ci){var cj;if(cf=="title"&&cb.hasChildNodes()){cj=_2.ParseHTMLIntoFakeRoot(cb.textContent);cb.removeChild(cb.firstChild);while(cj.hasChildNodes())cb.appendChild(cj.firstChild);}else null;b8(cb);return bg.fill(cb,ch,ci);}cf=cb.nodeName.toLowerCase();G.foreachNotPreserved(ca,"[ws-attr-holes]",function(ch){var ci,cj,ck,cl,cm;ci=m.SplitChars(ch.getAttribute("ws-attr-holes"),[" "],1);for(cj=0,ck=ci.length-1;cj<=ck;cj++){cl=N.get(ci,cj);ch.setAttribute(cl,(cm=new a.RegExp("\\${"+cf+"}","ig"),ch.getAttribute(cl).replace(cm,cb.textContent)));}});cg=ca.querySelector("[ws-hole="+cf+"]");if(O.Equals(cg,null)){cc=ca.querySelector("[ws-replace="+cf+"]");return O.Equals(cc,null)?(cd=ca.querySelector("slot[name="+cf+"]"),ca.tagName.toLowerCase()=="template"?(ce(cd.parentNode,cd),void cd.parentNode.removeChild(cd)):null):(ce(cc.parentNode,cc),void cc.parentNode.removeChild(cc));}else{while(cg.hasChildNodes())cg.removeChild(cg.lastChild);cg.removeAttribute("ws-hole");return ce(cg,null);}}function b8(ca){if(!ca.hasAttribute("ws-preserve"))if(m.StartsWith(ca.nodeName.toLowerCase(),"ws-"))b_(ca);else{bg.convertAttrs(ca);b9(ca.firstChild);}}function b9(ca){return b6(0,ca);}function b_(ca){return b6(1,ca);}function b$(ca){var cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm;while(true){cb=ca.querySelector("[ws-template]");if(O.Equals(cb,null)){cc=ca.querySelector("[ws-children-template]");if(O.Equals(cc,null)){cd=ca.querySelectorAll("template[id]");for(ce=1,cf=cd.length-1;ce<=cf;ce++){cg=cd[ce];if(b4.Contains(cg));else{G.PrepareTemplateStrict(b0,{$:1,$0:cg.getAttribute("id")},cg,null);b4.SAdd(cg);}}ch=ca.querySelectorAll("template[name]");for(ci=1,cj=ch.length-1;ci<=cj;ci++){ck=ch[ci];if(b4.Contains(ck));else{G.PrepareTemplateStrict(b0,{$:1,$0:ck.getAttribute("name")},ck,null);b4.SAdd(ck);}}return null;}else{cl=cc.getAttribute("ws-children-template");cc.removeAttribute("ws-children-template");G.PrepareTemplateStrict(b0,{$:1,$0:cl},cc,null);ca=ca;}}else{cm=cb.getAttribute("ws-template");(G.PrepareSingleTemplate(b0,{$:1,$0:cm},cb))(null);ca=ca;}}}b4=new _6.New$3();b5=(b1==null?"":b1.$0).toLowerCase();G.LoadedTemplateFile(b0).set_Item(b5,b2);if(b2.hasChildNodes()){b$(b2);b9(b2.firstChild);}};G.foreachNotPreserved=function(b0,b1,b2){_2.IterSelector(b0,b1,function(b3){if(b3.closest("[ws-preserve]")==null)b2(b3);});};G.PrepareSingleTemplate=function(b0,b1,b2){var b3;b3=G.FakeRootSingle(b2);return function(b4){G.PrepareTemplateStrict(b0,b1,b3,b4);};};G.TextHoleRE=function(){_5.$cctor();return _5.TextHoleRE;};H.NewFromSeq=function(b0){var b1,b2,b3;b1={};b2=q.Get(b0);try{while(b2.MoveNext()){b3=b2.Current();b1[b3[0]]=b3[1];}}finally{if(typeof b2=="object"&&"Dispose"in b2)b2.Dispose();}return b1;};I.Id=function(){(I.lastId())[0]++;return"Form"+a.String((I.lastId())[0]);};I.lastId=function(){_8.$cctor();return _8.lastId;};J=t.Var$1=bX.Class({},r,J);J.Create$1=function(b0){return new Y.New(false,P.New({$:2,$0:b0,$1:[]}),b0);};J.Create=function(){return new Y.New(false,P.New({$:2,$0:null,$1:[]}),null);};J.Update=function(b0,b1){J.Set(b0,b1(b0.Get()));};J.Set=function(b0,b1){b0.Set(b1);};L=K.T=bX.Class({GetEnumerator:function(){return new s.New(this,null,function(b0){var b1;b1=b0.s;return b1.$==0?false:(b0.c=b1.$0,b0.s=b1.$1,true);},void 0);}},null,L);L.Empty=new L({$:0});M.Map=function(b0,b1){return b1.$==1?{$:1,$0:b1.$0}:{$:0,$0:b0(b1.$0)};};M.Apply=function(b0,b1){return b0.$==0?b1.$==0?{$:0,$0:b0.$0(b1.$0)}:{$:1,$0:b1.$0}:b1.$==0?{$:1,$0:b0.$0}:{$:1,$0:K.append(b0.$0,b1.$0)};};M.IsFailure=function(b0){return b0.$==1;};M.Append=function(b0,b1,b2){return b1.$==0?b2.$==0?{$:0,$0:b0(b1.$0,b2.$0)}:b2:b2.$==0?b1:{$:1,$0:K.append(b1.$0,b2.$0)};};N.get=function(b0,b1){N.checkBounds(b0,b1);return b0[b1];};N.length=function(b0){return b0.dims===2?b0.length*b0.length:b0.length;};N.checkBounds=function(b0,b1){if(b1<0||b1>=b0.length)e.FailWith("Index was outside the bounds of the array.");};N.set=function(b0,b1,b2){N.checkBounds(b0,b1);b0[b1]=b2;};O.Equals=function(b0,b1){var b2,b3,b4,b5;if(b0===b1)return true;else{b2=typeof b0;if(b2=="object"){if(b0===null||b0===void 0||b1===null||b1===void 0||!O.Equals(typeof b1,"object"))return false;else if("Equals"in b0)return b0.Equals(b1);else if("Equals"in b1)return false;else if(b0 instanceof a.Array&&b1 instanceof a.Array)return O.arrayEquals(b0,b1);else if(b0 instanceof a.Date&&b1 instanceof a.Date)return O.dateEquals(b0,b1);else{b3=[true];for(var b6 in b0)if(function(b7){b3[0]=!b0.hasOwnProperty(b7)||b1.hasOwnProperty(b7)&&O.Equals(b0[b7],b1[b7]);return!b3[0];}(b6))break;if(b3[0]){for(var b7 in b1)if(function(b8){b3[0]=!b1.hasOwnProperty(b8)||b0.hasOwnProperty(b8);return!b3[0];}(b7))break;}return b3[0];}}else return b2=="function"&&("$Func"in b0?b0.$Func===b1.$Func&&b0.$Target===b1.$Target:"$Invokes"in b0&&"$Invokes"in b1&&O.arrayEquals(b0.$Invokes,b1.$Invokes));}};O.arrayEquals=function(b0,b1){var b2,b3;if(N.length(b0)===N.length(b1)){b2=true;b3=0;while(b2&&b3<N.length(b0)){!O.Equals(N.get(b0,b3),N.get(b1,b3))?b2=false:void 0;b3=b3+1;}return b2;}else return false;};O.dateEquals=function(b0,b1){return b0.getTime()===b1.getTime();};O.Hash=function(b0){var b1;b1=typeof b0;return b1=="function"?0:b1=="boolean"?b0?1:0:b1=="number"?b0:b1=="string"?O.hashString(b0):b1=="object"?b0==null?0:b0 instanceof a.Array?O.hashArray(b0):O.hashObject(b0):0;};O.hashString=function(b0){var b1,b2,b3;if(b0===null)return 0;else{b1=5381;for(b2=0,b3=b0.length-1;b2<=b3;b2++)b1=O.hashMix(b1,b0[b2].charCodeAt());return b1;}};O.hashArray=function(b0){var b1,b2,b3;b1=-34948909;for(b2=0,b3=N.length(b0)-1;b2<=b3;b2++)b1=O.hashMix(b1,O.Hash(N.get(b0,b2)));return b1;};O.hashObject=function(b0){var b1,b2;if("GetHashCode"in b0)return b0.GetHashCode();else{b1=[0];for(var b3 in b0)if(function(b4){b1[0]=O.hashMix(O.hashMix(b1[0],O.hashString(b4)),O.Hash(b0[b4]));return false;}(b3))break;return b1[0];}};O.hashMix=function(b0,b1){return(b0<<5)+b0+b1;};O.Compare=function(b0,b1){var b2,b3,b4,b5,b6,b7;if(b0===b1)return 0;else{b3=typeof b0;switch(b3=="function"?1:b3=="boolean"?2:b3=="number"?2:b3=="string"?2:b3=="object"?3:0){case 0:return typeof b1=="undefined"?0:-1;case 1:return e.FailWith("Cannot compare function values.");case 2:return b0<b1?-1:1;case 3:if(b0===null)b4=-1;else if(b1===null)b4=1;else if("CompareTo"in b0)b4=b0.CompareTo(b1);else if("CompareTo0"in b0)b4=b0.CompareTo0(b1);else if(b0 instanceof a.Array&&b1 instanceof a.Array)b4=O.compareArrays(b0,b1);else if(b0 instanceof a.Date&&b1 instanceof a.Date)b4=O.compareDates(b0,b1);else{b5=[0];for(var b8 in b0)if(function(b9){return!b0.hasOwnProperty(b9)?false:!b1.hasOwnProperty(b9)?(b5[0]=1,true):(b5[0]=O.Compare(b0[b9],b1[b9]),b5[0]!==0);}(b8))break;if(b5[0]===0){for(var b9 in b1)if(function(b_){return!b1.hasOwnProperty(b_)?false:!b0.hasOwnProperty(b_)&&(b5[0]=-1,true);}(b9))break;}b4=b5[0];}return b4;}}};O.compareArrays=function(b0,b1){var b2,b3;if(N.length(b0)<N.length(b1))return -1;else if(N.length(b0)>N.length(b1))return 1;else{b2=0;b3=0;while(b2===0&&b3<N.length(b0)){b2=O.Compare(N.get(b0,b3),N.get(b1,b3));b3=b3+1;}return b2;}};O.compareDates=function(b0,b1){return O.Compare(b0.getTime(),b1.getTime());};N.ofSeq=function(b0){var b1,b2;if(b0 instanceof a.Array)return b0.slice();else if(b0 instanceof L)return N.ofList(b0);else{b1=[];b2=q.Get(b0);try{while(b2.MoveNext())b1.push(b2.Current());return b1;}finally{if(typeof b2=="object"&&"Dispose"in b2)b2.Dispose();}}};N.ofList=function(b0){var b1,b2;b2=[];b1=b0;while(!(b1.$==0)){b2.push(K.head(b1));b1=K.tail(b1);}return b2;};N.exists=function(b0,b1){var b2,b3,b4,b5;b2=false;b3=0;b5=N.length(b1);while(!b2&&b3<b5)if(b0(b1[b3]))b2=true;else b3=b3+1;return b2;};N.tryPick=function(b0,b1){var b2,b3,b4;b2=null;b3=0;while(b3<b1.length&&b2==null){b4=b0(b1[b3]);if(b4!=null&&b4.$==1)b2=b4;b3=b3+1;}return b2;};N.tryFindIndex=function(b0,b1){var b2,b3;b2=null;b3=0;while(b3<b1.length&&b2==null){b0(b1[b3])?b2={$:1,$0:b3}:void 0;b3=b3+1;}return b2;};N.filter=function(b0,b1){var b2,b3,b4;b2=[];for(b3=0,b4=b1.length-1;b3<=b4;b3++)if(b0(b1[b3]))b2.push(b1[b3]);return b2;};N.map=function(b0,b1){var b2,b3,b4;b2=new a.Array(b1.length);for(b3=0,b4=b1.length-1;b3<=b4;b3++)b2[b3]=b0(b1[b3]);return b2;};N.iter=function(b0,b1){var b2,b3;for(b2=0,b3=b1.length-1;b2<=b3;b2++)b0(b1[b2]);};N.foldBack=function(b0,b1,b2){var b3,b4,b5,b6,b7;b3=b2;b5=b1.length;for(b6=1,b7=b5;b6<=b7;b6++)b3=b0(b1[b5-b6],b3);return b3;};N.concat=function(b0){return a.Array.prototype.concat.apply([],N.ofSeq(b0));};N.pick=function(b0,b1){var b2;b2=N.tryPick(b0,b1);return b2==null?e.FailWith("KeyNotFoundException"):b2.$0;};N.choose=function(b0,b1){var b2,b3,b4,b5;b2=[];for(b3=0,b4=b1.length-1;b3<=b4;b3++){b5=b0(b1[b3]);if(b5==null);else b2.push(b5.$0);}return b2;};N.create=function(b0,b1){var b2,b3,b4;b2=new a.Array(b0);for(b3=0,b4=b0-1;b3<=b4;b3++)b2[b3]=b1;return b2;};N.init=function(b0,b1){var b2,b3,b4;if(b0<0)e.FailWith("Negative size given.");else null;b2=new a.Array(b0);for(b3=0,b4=b0-1;b3<=b4;b3++)b2[b3]=b1(b3);return b2;};N.forall=function(b0,b1){var b2,b3,b4,b5;b2=true;b3=0;b5=N.length(b1);while(b2&&b3<b5)if(b0(b1[b3]))b3=b3+1;else b2=false;return b2;};v=t.View=bX.Class({},null,v);P.Map=function(b0,b1){var b2,b3;b2=b1.s;return b2!=null&&b2.$==0?P.New({$:0,$0:b0(b2.$0)}):(b3=P.New({$:3,$0:[],$1:[]}),(P.When(b1,function(b4){P.MarkDone(b3,b1,b0(b4));},b3),b3));};P.Map2Unit=function(b0,b1){var b2,b3,b4;function b5(){var b6,b7,b8;if(!(b6=b4.s,b6!=null&&b6.$==0||b6!=null&&b6.$==2)){b7=P.ValueAndForever(b0);b8=P.ValueAndForever(b1);if(b7!=null&&b7.$==1)b8!=null&&b8.$==1?b7.$0[1]&&b8.$0[1]?P.MarkForever(b4,null):P.MarkReady(b4,null):void 0;}}b2=b0.s;b3=b1.s;return b2!=null&&b2.$==0?b3!=null&&b3.$==0?P.New({$:0,$0:null}):b1:b3!=null&&b3.$==0?b0:(b4=P.New({$:3,$0:[],$1:[]}),(P.When(b0,b5,b4),P.When(b1,b5,b4),b4));};P.WhenObsoleteRun=function(b0,b1){var b2;b2=b0.s;if(b2==null)b1();else b2!=null&&b2.$==2?b2.$1.push(b1):b2!=null&&b2.$==3?b2.$1.push(b1):void 0;};P.When=function(b0,b1,b2){var b3;b3=b0.s;if(b3==null)P.Obsolete(b2);else b3!=null&&b3.$==2?(P.EnqueueSafe(b3.$1,b2),b1(b3.$0)):b3!=null&&b3.$==3?(b3.$0.push(b1),P.EnqueueSafe(b3.$1,b2)):b1(b3.$0);};P.MarkDone=function(b0,b1,b2){var b3;if(b3=b1.s,b3!=null&&b3.$==0)P.MarkForever(b0,b2);else P.MarkReady(b0,b2);};P.Map2=function(b0,b1,b2){var b3,b4,b5;function b6(b7){var b8,b9,b_;if(!(b8=b5.s,b8!=null&&b8.$==0||b8!=null&&b8.$==2)){b9=P.ValueAndForever(b1);b_=P.ValueAndForever(b2);if(b9!=null&&b9.$==1)b_!=null&&b_.$==1?b9.$0[1]&&b_.$0[1]?P.MarkForever(b5,b0(b9.$0[0],b_.$0[0])):P.MarkReady(b5,b0(b9.$0[0],b_.$0[0])):void 0;}}b3=b1.s;b4=b2.s;return b3!=null&&b3.$==0?b4!=null&&b4.$==0?P.New({$:0,$0:b0(b3.$0,b4.$0)}):P.Map2Opt1(b0,b3.$0,b2):b4!=null&&b4.$==0?P.Map2Opt2(b0,b4.$0,b1):(b5=P.New({$:3,$0:[],$1:[]}),(P.When(b1,b6,b5),P.When(b2,b6,b5),b5));};P.ValueAndForever=function(b0){var b1;b1=b0.s;return b1!=null&&b1.$==0?{$:1,$0:[b1.$0,true]}:b1!=null&&b1.$==2?{$:1,$0:[b1.$0,false]}:null;};P.MarkForever=function(b0,b1){var b2,b3,b4,b5;b2=b0.s;if(b2!=null&&b2.$==3){b0.s={$:0,$0:b1};b3=b2.$0;for(b4=0,b5=N.length(b3)-1;b4<=b5;b4++)(N.get(b3,b4))(b1);}else void 0;};P.MarkReady=function(b0,b1){var b2,b3,b4,b5;b2=b0.s;if(b2!=null&&b2.$==3){b0.s={$:2,$0:b1,$1:b2.$1};b3=b2.$0;for(b4=0,b5=N.length(b3)-1;b4<=b5;b4++)(N.get(b3,b4))(b1);}else void 0;};P.EnqueueSafe=function(b0,b1){var b2,b3,b4,b5;b0.push(b1);if(b0.length%20===0){b2=b0.slice(0);by.Clear(b0);for(b3=0,b4=N.length(b2)-1;b3<=b4;b3++){b5=N.get(b2,b3);if(typeof b5=="object")(function(b6){if(b6.s)b0.push(b6);}(b5));else(function(b6){b0.push(b6);}(b5));}}else void 0;};P.Map2Opt1=function(b0,b1,b2){return P.Map(function(b3){return b0(b1,b3);},b2);};P.Map2Opt2=function(b0,b1,b2){return P.Map(function(b3){return b0(b3,b1);},b2);};P.SnapshotOn=function(b0,b1){var b2;function b3(b4){var b5,b6,b7;if(!(b5=b2.s,b5!=null&&b5.$==0||b5!=null&&b5.$==2)){b6=P.ValueAndForever(b0);b7=P.ValueAndForever(b1);if(b6!=null&&b6.$==1)b7!=null&&b7.$==1?b6.$0[1]||b7.$0[1]?P.MarkForever(b2,b7.$0[0]):P.MarkReady(b2,b7.$0[0]):void 0;}}b2=P.New({$:3,$0:[],$1:[]});P.When(b0,b3,b2);P.WhenReady(b1,b3);return b2;};P.WhenObsolete=function(b0,b1){var b2;b2=b0.s;if(b2==null)P.Obsolete(b1);else b2!=null&&b2.$==2?P.EnqueueSafe(b2.$1,b1):b2!=null&&b2.$==3?P.EnqueueSafe(b2.$1,b1):void 0;};P.Join=function(b0){var b1;b1=P.New({$:3,$0:[],$1:[]});P.When(b0,function(b2){var b3;b3=b2();P.When(b3,function(b4){var b5,b6;if((b5=b3.s,b5!=null&&b5.$==0)&&(b6=b0.s,b6!=null&&b6.$==0))P.MarkForever(b1,b4);else P.MarkReady(b1,b4);},b1);},b1);return b1;};P.WhenRun=function(b0,b1,b2){var b3;b3=b0.s;if(b3==null)b2();else b3!=null&&b3.$==2?(b3.$1.push(b2),b1(b3.$0)):b3!=null&&b3.$==3?(b3.$0.push(b1),b3.$1.push(b2)):b1(b3.$0);};P.WhenReady=function(b0,b1){var b2,b3;b3=b0.s;switch(b3!=null&&b3.$==2?(b2=b3.$0,0):b3==null?1:b3!=null&&b3.$==3?2:(b2=b3.$0,0)){case 0:b1(b2);break;case 1:null;break;case 2:b3.$0.push(b1);break;}};P.Copy=function(b0){var b1,b2,b3;b1=b0.s;return b1==null?b0:b1!=null&&b1.$==2?(b2=P.New({$:2,$0:b1.$0,$1:[]}),(P.WhenObsolete(b0,b2),b2)):b1!=null&&b1.$==3?(b3=P.New({$:3,$0:[],$1:[]}),(P.When(b0,function(b4){P.MarkDone(b3,b0,b4);},b3),b3)):b0;};Q=t.AttrProxy=bX.Class({},null,Q);Q.Create=function(b0,b1){return _1.Static(function(b2){b2.setAttribute(b0,b1);});};Q.Append=function(b0,b1){return _1.AppendTree(b0,b1);};Q.Concat=function(b0){var b1;b1=_4.ofSeqNonCopying(b0);return _4.TreeReduce(_1.EmptyAttr(),Q.Append,b1);};R=g.ErrorMessage=bX.Class({},r,R);R.New=bX.Ctor(function(b0,b1){r.New.call(this);this.id=b0;this.message=b1;},R);K.filter=function(b0,b1){var b2,b3,b4,b5,b6,b7;if(b1.$==0)return b1;else{b2=L.Empty;b3=b2;b4=b1;b5=true;while(b5){if(b0(b4.$0)){b2.$==0?(b2=new L({$:1}),b3=b2):b3=(b6=new L({$:1}),b3.$1=b6,b6);b7=b4.$0;b3.$=1;b3.$0=b7;}b4=b4.$1;if(b4.$==0)b5=false;}if(!(b2.$==0))b3.$1=L.Empty;return b2;}};K.ofArray=function(b0){var b1,b2,b3;b1=L.Empty;for(b2=N.length(b0)-1,b3=0;b2>=b3;b2--)b1=new L({$:1,$0:N.get(b0,b2),$1:b1});return b1;};K.ofSeq=function(b0){var b1,b2,b3,b4,b5,b6;if(b0 instanceof L)return b0;else if(b0 instanceof a.Array)return K.ofArray(b0);else{b1=q.Get(b0);try{b3=b1.MoveNext();if(!b3)b2=L.Empty;else{b5=new L({$:1});b4=b5;while(b3){b4.$0=b1.Current();if(b1.MoveNext())b4=(b6=new L({$:1}),b4.$1=b6,b6);else b3=false;}b4.$1=L.Empty;b2=b5;}return b2;}finally{if(typeof b1=="object"&&"Dispose"in b1)b1.Dispose();}}};K.append=function(b0,b1){var b2,b3,b4,b5,b6;if(b0.$==0)return b1;else if(b1.$==0)return b0;else{b5=new L({$:1});b2=b5;b3=b0;b4=true;while(b4){b2.$0=b3.$0;b3=b3.$1;if(b3.$==0)b4=false;else b2=(b6=new L({$:1}),b2.$1=b6,b6);}b2.$1=b1;return b5;}};K.head=function(b0){return b0.$==1?b0.$0:K.listEmpty();};K.tail=function(b0){return b0.$==1?b0.$1:K.listEmpty();};K.listEmpty=function(){return e.FailWith("The input list was empty.");};S=t.Var=bX.Class({},r,S);S.New=bX.Ctor(function(){r.New.call(this);},S);T.SubmitterValidate=function(b0){var b1;return Q.Append(_3.Handler("click",function(){return function(){return b0.Trigger();};}),(b1=v.Const("disabled"),_3.DynamicPred("disabled",v.Map(M.IsFailure,b0.input),b1)));};X=W.Dictionary=bX.Class({set_Item:function(b0,b1){this.set(b0,b1);},ContainsKey:function(b0){var b1,b2;b1=this;b2=this.data[this.hash(b0)];return b2==null?false:N.exists(function(b3){return b1.equals.apply(null,[(e.KeyValue(b3))[0],b0]);},b2);},TryGetValue:function(b0,b1){var b2,b3,b4;b2=this;b3=this.data[this.hash(b0)];return b3==null?false:(b4=N.tryPick(function(b5){var b6;b6=e.KeyValue(b5);return b2.equals.apply(null,[b6[0],b0])?{$:1,$0:b6[1]}:null;},b3),b4!=null&&b4.$==1&&(b1.set(b4.$0),true));},RemoveKey:function(b0){return this.remove(b0);},Keys:function(){return new bi.New(this);},set:function(b0,b1){var b2,b3,b4,b5;b2=this;b3=this.hash(b0);b4=this.data[b3];if(b4==null){this.count=this.count+1;this.data[b3]=new a.Array({K:b0,V:b1});}else{b5=N.tryFindIndex(function(b6){return b2.equals.apply(null,[(e.KeyValue(b6))[0],b0]);},b4);b5==null?(this.count=this.count+1,b4.push({K:b0,V:b1})):b4[b5.$0]={K:b0,V:b1};}},remove:function(b0){var b1,b2,b3,b4;b1=this;b2=this.hash(b0);b3=this.data[b2];return b3==null?false:(b4=N.filter(function(b5){return!b1.equals.apply(null,[(e.KeyValue(b5))[0],b0]);},b3),N.length(b4)<b3.length&&(this.count=this.count-1,this.data[b2]=b4,true));},Item:function(b0){return this.get(b0);},GetEnumerator:function(){return q.Get0(N.concat(j.GetFieldValues(this.data)));},get:function(b0){var b1,b2;b1=this;b2=this.data[this.hash(b0)];return b2==null?be.notPresent():N.pick(function(b3){var b4;b4=e.KeyValue(b3);return b1.equals.apply(null,[b4[0],b0])?{$:1,$0:b4[1]}:null;},b2);}},r,X);X.New$5=bX.Ctor(function(){X.New$6.call(this,[],O.Equals,O.Hash);},X);X.New$6=bX.Ctor(function(b0,b1,b2){var b3,b4;r.New.call(this);this.equals=b1;this.hash=b2;this.count=0;this.data=[];b3=q.Get(b0);try{while(b3.MoveNext()){b4=b3.Current();this.set(b4.K,b4.V);}}finally{if(typeof b3=="object"&&"Dispose"in b3)b3.Dispose();}},X);Y=t.ConcreteVar=bX.Class({get_Id:function(){return"uinref"+a.String(this.id);},get_View:function(){return this.view;},Set:function(b0){if(this.isConst)(function(b1){return b1("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(b1){bY.log(b1);}));else{P.Obsolete(this.snap);this.current=b0;this.snap=P.New({$:2,$0:b0,$1:[]});}},Get:function(){return this.current;},UpdateMaybe:function(b0){var b1;b1=b0(this.Get());if(b1!=null&&b1.$==1)this.Set(b1.$0);}},S,Y);Y.New=bX.Ctor(function(b0,b1,b2){var b3;b3=this;S.New.call(this);this.isConst=b0;this.current=b2;this.snap=b1;this.view=function(){return b3.snap;};this.id=_.Int();},Y);Z.TryParseInt32=function(b0,b1){return Z.TryParse(b0,-2147483648,2147483647,b1);};P.Obsolete=function(b0){var b1,b2,b3,b4,b5;b2=b0.s;if(b2==null||(b2!=null&&b2.$==2?(b1=b2.$1,false):b2!=null&&b2.$==3?(b1=b2.$1,false):true))void 0;else{b0.s=null;for(b3=0,b4=N.length(b1)-1;b3<=b4;b3++){b5=N.get(b1,b3);if(typeof b5=="object")(function(b6){P.Obsolete(b6);}(b5));else b5();}}};P.New=function(b0){return{s:b0};};_0.CreateEmbedNode=function(){return{Current:null,Dirty:false};};_0.UpdateEmbedNode=function(b0,b1){b0.Current=b1;b0.Dirty=true;};_0.LinkElement=function(b0,b1){_0.InsertDoc(b0,b1,null);};_0.InsertDoc=function(b0,b1,b2){var b3,b4,b5;while(true)if(b1!=null&&b1.$==1)return _0.InsertNode(b0,b1.$0.El,b2);else if(b1!=null&&b1.$==2){b3=b1.$0;b3.Dirty=false;b1=b3.Current;}else if(b1==null)return b2;else if(b1!=null&&b1.$==4)return _0.InsertNode(b0,b1.$0.Text,b2);else if(b1!=null&&b1.$==5)return _0.InsertNode(b0,b1.$0,b2);else if(b1!=null&&b1.$==6)return N.foldBack(function(b6,b7){return(((bX.Curried3(function(b8,b9,b_){return b9==null||b9.constructor===bc?_0.InsertDoc(b8,b9,b_):_0.InsertNode(b8,b9,b_);}))(b0))(b6))(b7);},b1.$0.Els,b2);else{b4=b1.$1;b5=b1.$0;b1=b5;b2=_0.InsertDoc(b0,b4,b2);}};_0.CreateRunState=function(b0,b1){return bs.New(bt.get_Empty(),_0.CreateElemNode(b0,_1.EmptyAttr(),b1));};_0.PerformAnimatedUpdate=function(b0,b1,b2){var b3;return bj.get_UseAnimations()?(b3=null,bu.Delay(function(){var b4,b5,b6;b4=bt.FindAll(b2);b5=_0.ComputeChangeAnim(b1,b4);b6=_0.ComputeEnterAnim(b1,b4);return bu.Bind(bj.Play(bj.Append(b5,_0.ComputeExitAnim(b1,b4))),function(){return bu.Bind(_0.SyncElemNodesNextFrame(b0,b1),function(){return bu.Bind(bj.Play(b6),function(){b1.PreviousNodes=b4;return bu.Return(null);});});});})):_0.SyncElemNodesNextFrame(b0,b1);};_0.PerformSyncUpdate=function(b0,b1,b2){var b3;b3=bt.FindAll(b2);_0.SyncElemNode(b0,b1.Top);b1.PreviousNodes=b3;};_0.CreateElemNode=function(b0,b1,b2){var b3;_0.LinkElement(b0,b2);b3=_1.Insert(b0,b1);return $.New(b3,b2,null,b0,_.Int(),bX.GetOptional(b3.OnAfterRender));};_0.InsertNode=function(b0,b1,b2){_2.InsertAt(b0,b2,b1);return b1;};_0.SyncElemNodesNextFrame=function(b0,b1){function b2(b3){a.requestAnimationFrame(function(){_0.SyncElemNode(b0,b1.Top);b3();});}return bk.BatchUpdatesEnabled()?bu.FromContinuations(function(b3,b4,b5){return b2.apply(null,[b3,b4,b5]);}):(_0.SyncElemNode(b0,b1.Top),bu.Return(null));};_0.ComputeExitAnim=function(b0,b1){return bj.Concat(N.map(function(b2){return _1.GetExitAnim(b2.Attr);},bt.ToArray(bt.Except(b1,bt.Filter(function(b2){return _1.HasExitAnim(b2.Attr);},b0.PreviousNodes)))));};_0.ComputeEnterAnim=function(b0,b1){return bj.Concat(N.map(function(b2){return _1.GetEnterAnim(b2.Attr);},bt.ToArray(bt.Except(b0.PreviousNodes,bt.Filter(function(b2){return _1.HasEnterAnim(b2.Attr);},b1)))));};_0.ComputeChangeAnim=function(b0,b1){var b2;function b3(b4){return _1.HasChangeAnim(b4.Attr);}b2=function(b4){return bt.Filter(b3,b4);};return bj.Concat(N.map(function(b4){return _1.GetChangeAnim(b4.Attr);},bt.ToArray(bt.Intersect(b2(b0.PreviousNodes),b2(b1)))));};_0.SyncElemNode=function(b0,b1){!b0?_0.SyncElement(b1):void 0;_0.Sync(b1.Children);_0.AfterRender(b1);};_0.SyncElement=function(b0){function b1(b2){function b3(b4){var b5,b6,b7,b8;while(true){if(b4!=null&&b4.$==0){b6=b4.$1;b7=b4.$0;if(b3(b7))return true;else b4=b6;}else if(b4!=null&&b4.$==2){b8=b4.$0;if(b8.Dirty)return true;else b4=b8.Current;}else return b4!=null&&b4.$==6&&(b5=b4.$0,b5.Dirty||N.exists(b1,b5.Holes));}}return b3(b2.Children);}_1.Sync(b0.El,b0.Attr);if(b1(b0))_0.DoSyncElement(b0);};_0.Sync=function(b0){var b1,b2,b3,b4,b5;while(true){if(b0!=null&&b0.$==1)return _0.SyncElemNode(false,b0.$0);else if(b0!=null&&b0.$==2){b3=b0.$0;b0=b3.Current;}else if(b0==null)return null;else if(b0!=null&&b0.$==5)return null;else if(b0!=null&&b0.$==4){b1=b0.$0;return b1.Dirty?(b1.Text.nodeValue=b1.Value,b1.Dirty=false):null;}else if(b0!=null&&b0.$==6){b2=b0.$0;N.iter(function(b6){_0.SyncElemNode(false,b6);},b2.Holes);N.iter(function(b6){_1.Sync(b6[0],b6[1]);},b2.Attrs);return _0.AfterRender(b2);}else{b4=b0.$1;b5=b0.$0;_0.Sync(b5);b0=b4;}}};_0.AfterRender=function(b0){var b1;b1=bX.GetOptional(b0.Render);if(b1!=null&&b1.$==1){b1.$0(b0.El);bX.SetOptional(b0,"Render",null);}};_0.DoSyncElement=function(b0){var b1,b2,b3;function b4(b5,b6){var b7,b8,b9,b_;while(true){if(b5!=null&&b5.$==1)return b5.$0.El;else if(b5!=null&&b5.$==2){b8=b5.$0;if(b8.Dirty){b8.Dirty=false;return _0.InsertDoc(b1,b8.Current,b6);}else b5=b8.Current;}else if(b5==null)return b6;else if(b5!=null&&b5.$==4)return b5.$0.Text;else if(b5!=null&&b5.$==5)return b5.$0;else if(b5!=null&&b5.$==6){b7=b5.$0;b7.Dirty?b7.Dirty=false:void 0;return N.foldBack(function(b$,ca){return b$==null||b$.constructor===bc?b4(b$,ca):b$;},b7.Els,b6);}else{b9=b5.$1;b_=b5.$0;b5=b_;b6=b4(b9,b6);}}}b1=b0.El;bR.Iter((b2=b0.El,function(b5){_2.RemoveNode(b2,b5);}),bR.Except(bR.DocChildren(b0),bR.Children(b0.El,bX.GetOptional(b0.Delimiters))));b4(b0.Children,(b3=bX.GetOptional(b0.Delimiters),b3!=null&&b3.$==1?b3.$0[1]:null));};_1.Static=function(b0){return new Q({$:3,$0:b0});};_1.AppendTree=function(b0,b1){var b2;return b0===null?b1:b1===null?b0:(b2=new Q({$:2,$0:b0,$1:b1}),(_1.SetFlags(b2,_1.Flags(b0)|_1.Flags(b1)),b2));};_1.Dynamic=function(b0,b1){return new Q({$:1,$0:new bB.New(b0,b1)});};_1.SetFlags=function(b0,b1){b0.flags=b1;};_1.Flags=function(b0){return b0!==null&&b0.hasOwnProperty("flags")?b0.flags:0;};_1.Updates=function(b0){return _4.MapTreeReduce(function(b1){return b1.NChanged();},v.Const(),v.Map2Unit,b0.DynNodes);};_1.EmptyAttr=function(){bp.$cctor();return bp.EmptyAttr;};_1.Insert=function(b0,b1){var b2,b3,b4;function b5(b6){var b7,b8;while(true)if(!(b6===null)){if(b6!=null&&b6.$==1)return b2.push(b6.$0);else if(b6!=null&&b6.$==2){b7=b6.$1;b8=b6.$0;b5(b8);b6=b7;}else return b6!=null&&b6.$==3?b6.$0(b0):b6!=null&&b6.$==4?b3.push(b6.$0):null;}else return null;}b2=[];b3=[];b5(b1);b4=b2.slice(0);return bo.New(b0,_1.Flags(b1),b4,b3.length===0?null:{$:1,$0:function(b6){k.iter(function(b7){b7(b6);},b3);}});};_1.HasExitAnim=function(b0){var b1;b1=2;return(b0.DynFlags&b1)===b1;};_1.GetExitAnim=function(b0){return _1.GetAnim(b0,function(b1,b2){return b1.NGetExitAnim(b2);});};_1.HasEnterAnim=function(b0){var b1;b1=1;return(b0.DynFlags&b1)===b1;};_1.GetEnterAnim=function(b0){return _1.GetAnim(b0,function(b1,b2){return b1.NGetEnterAnim(b2);});};_1.HasChangeAnim=function(b0){var b1;b1=4;return(b0.DynFlags&b1)===b1;};_1.GetChangeAnim=function(b0){return _1.GetAnim(b0,function(b1,b2){return b1.NGetChangeAnim(b2);});};_1.GetAnim=function(b0,b1){return bj.Concat(N.map(function(b2){return b1(b2,b0.DynElem);},b0.DynNodes));};_1.Sync=function(b0,b1){N.iter(function(b2){b2.NSync(b0);},b1.DynNodes);};_2.ParseHTMLIntoFakeRoot=function(b0){var b1,b2,b3,b4,b5;function b6(b7,b8){var b9;while(true)if(b8===0)return b7;else{b9=b8;b7=b7.lastChild;b8=b9-1;}}b1=self.document.createElement("div");return!_2.rhtml().test(b0)?(b1.appendChild(self.document.createTextNode(b0)),b1):(b2=(b3=_2.rtagName().exec(b0),O.Equals(b3,null)?"":N.get(b3,1).toLowerCase()),(b4=(b5=(_2.wrapMap())[b2],b5?b5:_2.defaultWrap()),(b1.innerHTML=b4[1]+b0.replace(_2.rxhtmlTag(),"<$1></$2>")+b4[2],b6(b1,b4[0]))));};_2.rhtml=function(){bC.$cctor();return bC.rhtml;};_2.wrapMap=function(){bC.$cctor();return bC.wrapMap;};_2.defaultWrap=function(){bC.$cctor();return bC.defaultWrap;};_2.rxhtmlTag=function(){bC.$cctor();return bC.rxhtmlTag;};_2.rtagName=function(){bC.$cctor();return bC.rtagName;};_2.IterSelector=function(b0,b1,b2){var b3,b4,b5;b3=b0.querySelectorAll(b1);for(b4=0,b5=b3.length-1;b4<=b5;b4++)b2(b3[b4]);};_2.InsertAt=function(b0,b1,b2){var b3;if(!(b2.parentNode===b0&&b1===(b3=b2.nextSibling,O.Equals(b3,null)?null:b3)))b0.insertBefore(b2,b1);};_2.RemoveNode=function(b0,b1){if(b1.parentNode===b0)b0.removeChild(b1);};_3.Value=function(b0){return _3.ValueWith(bb.StringApply(),b0);};_3.ValueWith=function(b0,b1){var b2;b2=b0(b1);return Q.Append(_1.Static(b2[0]),_3.DynamicCustom(b2[1],b2[2]));};_3.DynamicProp=function(b0,b1){return _1.Dynamic(b1,function(b2){return function(b3){b2[b0]=b3;};});};_3.DynamicPred=function(b0,b1,b2){function b3(b4,b5){return b5[0]?b4.setAttribute(b0,b5[1]):b4.removeAttribute(b0);}return _1.Dynamic(v.Map2(function(b4,b5){return[b4,b5];},b1,b2),function(b4){return function(b5){return b3(b4,b5);};});};_3.Handler=function(b0,b1){return _1.Static(function(b2){b2.addEventListener(b0,function(b3){return(b1(b2))(b3);},false);});};_3.DynamicCustom=function(b0,b1){return _1.Dynamic(b1,b0);};_4.ofSeqNonCopying=function(b0){var b1,b2;if(b0 instanceof a.Array)return b0;else if(b0 instanceof L)return N.ofList(b0);else if(b0===null)return[];else{b1=[];b2=q.Get(b0);try{while(b2.MoveNext())b1.push(b2.Current());return b1;}finally{if(typeof b2=="object"&&"Dispose"in b2)b2.Dispose();}}};_4.TreeReduce=function(b0,b1,b2){var b3;function b4(b5){return function(b6){var b7,b8;switch(b6<=0?0:b6===1?b5>=0&&b5<b3?1:(b7=b6,2):(b7=b6,2)){case 0:return b0;case 1:return N.get(b2,b5);case 2:b8=b6/2>>0;return b1((b4(b5))(b8),(b4(b5+b8))(b6-b8));}};}b3=N.length(b2);return(b4(0))(b3);};_4.MapTreeReduce=function(b0,b1,b2,b3){var b4;function b5(b6){return function(b7){var b8,b9;switch(b7<=0?0:b7===1?b6>=0&&b6<b4?1:(b8=b7,2):(b8=b7,2)){case 0:return b1;case 1:return b0(N.get(b3,b6));case 2:b9=b7/2>>0;return b2((b5(b6))(b9),(b5(b6+b9))(b7-b9));}};}b4=N.length(b3);return(b5(0))(b4);};_4.mapInPlace=function(b0,b1){var b2,b3;for(b2=0,b3=b1.length-1;b2<=b3;b2++)b1[b2]=b0(b1[b2]);return b1;};_5.$cctor=function(){_5.$cctor=a.ignore;_5.LoadedTemplates=new X.New$5();_5.LocalTemplatesLoaded=false;_5.GlobalHoles=new X.New$5();_5.TextHoleRE="\\${([^}]+)}";_5.RenderedFullDocTemplate=null;};_6=W.HashSet=bX.Class({SAdd:function(b0){return this.add(b0);},Contains:function(b0){var b1;b1=this.data[this.hash(b0)];return b1==null?false:this.arrContains(b0,b1);},add:function(b0){var b1,b2;b1=this.hash(b0);b2=this.data[b1];return b2==null?(this.data[b1]=[b0],this.count=this.count+1,true):this.arrContains(b0,b2)?false:(b2.push(b0),this.count=this.count+1,true);},arrContains:function(b0,b1){var b2,b3,b4,b5;b2=true;b3=0;b5=b1.length;while(b2&&b3<b5)if(this.equals.apply(null,[b1[b3],b0]))b2=false;else b3=b3+1;return!b2;},GetEnumerator:function(){return q.Get(bF.concat(this.data));},ExceptWith:function(b0){var b1;b1=q.Get(b0);try{while(b1.MoveNext())this.Remove(b1.Current());}finally{if(typeof b1=="object"&&"Dispose"in b1)b1.Dispose();}},Count:function(){return this.count;},IntersectWith:function(b0){var b1,b2,b3,b4,b5;b1=new _6.New$4(b0,this.equals,this.hash);b2=bF.concat(this.data);for(b3=0,b4=b2.length-1;b3<=b4;b3++){b5=b2[b3];if(!b1.Contains(b5))this.Remove(b5);}},Remove:function(b0){var b1;b1=this.data[this.hash(b0)];return b1==null?false:this.arrRemove(b0,b1)&&(this.count=this.count-1,true);},CopyTo:function(b0,b1){var b2,b3,b4;b2=bF.concat(this.data);for(b3=0,b4=b2.length-1;b3<=b4;b3++)N.set(b0,b3+b1,b2[b3]);},arrRemove:function(b0,b1){var b2,b3,b4,b5;b2=true;b3=0;b5=b1.length;while(b2&&b3<b5)if(this.equals.apply(null,[b1[b3],b0])){b1.splice.apply(b1,[b3,1]);b2=false;}else b3=b3+1;return!b2;}},r,_6);_6.New$3=bX.Ctor(function(){_6.New$4.call(this,[],O.Equals,O.Hash);},_6);_6.New$4=bX.Ctor(function(b0,b1,b2){var b3;r.New.call(this);this.equals=b1;this.hash=b2;this.data=[];this.count=0;b3=q.Get(b0);try{while(b3.MoveNext())this.add(b3.Current());}finally{if(typeof b3=="object"&&"Dispose"in b3)b3.Dispose();}},_6);_6.New$2=bX.Ctor(function(b0){_6.New$4.call(this,b0,O.Equals,O.Hash);},_6);_8.$cctor=function(){var b0;_8.$cctor=a.ignore;_8.lastId=[0];_8.Int=(b0=[0],function(){b0[0]++;return b0[0];});};_.Int=function(){_.set_counter(_.counter()+1);return _.counter();};_.set_counter=function(b0){bx.$cctor();bx.counter=b0;};_.counter=function(){bx.$cctor();return bx.counter;};$=t.DocElemNode=bX.Class({Equals:function(b0){return this.ElKey===b0.ElKey;},GetHashCode:function(){return this.ElKey;}},null,$);$.New=function(b0,b1,b2,b3,b4,b5){var b6;return new $((b6={Attr:b0,Children:b1,El:b3,ElKey:b4},(bX.SetOptional(b6,"Delimiters",b2),bX.SetOptional(b6,"Render",b5),b6)));};bb.StringApply=function(){bp.$cctor();return bp.StringApply;};bb.ApplyValue=function(b0,b1,b2){var b3;function b4(b5,b6){return b6==null?null:b5(b6.$0);}b3=null;return[function(b5){function b6(){b2.UpdateMaybe(function(b7){var b8;b3=b0(b5);return b3!=null&&b3.$==1&&(!O.Equals(b3.$0,b7)&&(b8=[b3,b3.$0],true))?b8[0]:null;});}b5.addEventListener("change",b6);b5.addEventListener("input",b6);b5.addEventListener("keypress",b6);},function(b5){var b6;b6=b1(b5);return function(b7){return b4(b6,b7);};},v.Map(function(b5){var b6;return b3!=null&&b3.$==1&&(O.Equals(b3.$0,b5)&&(b6=b3.$0,true))?null:{$:1,$0:b5};},b2.get_View())];};bb.StringSet=function(){bp.$cctor();return bp.StringSet;};bb.StringGet=function(){bp.$cctor();return bp.StringGet;};bb.DateTimeSetUnchecked=function(){bp.$cctor();return bp.DateTimeSetUnchecked;};bb.DateTimeGetUnchecked=function(){bp.$cctor();return bp.DateTimeGetUnchecked;};bb.FileApplyValue=function(b0,b1,b2){var b3;function b4(b5,b6){return b6==null?null:b5(b6.$0);}b3=null;return[function(b5){b5.addEventListener("change",function(){b2.UpdateMaybe(function(b6){var b7;b3=b0(b5);return b3!=null&&b3.$==1&&(b3.$0!==b6&&(b7=[b3,b3.$0],true))?b7[0]:null;});});},function(b5){var b6;b6=b1(b5);return function(b7){return b4(b6,b7);};},v.Map(function(b5){var b6;return b3!=null&&b3.$==1&&(O.Equals(b3.$0,b5)&&(b6=b3.$0,true))?null:{$:1,$0:b5};},b2.get_View())];};bb.FileSetUnchecked=function(){bp.$cctor();return bp.FileSetUnchecked;};bb.FileGetUnchecked=function(){bp.$cctor();return bp.FileGetUnchecked;};bb.IntSetUnchecked=function(){bp.$cctor();return bp.IntSetUnchecked;};bb.IntGetUnchecked=function(){bp.$cctor();return bp.IntGetUnchecked;};bb.IntSetChecked=function(){bp.$cctor();return bp.IntSetChecked;};bb.IntGetChecked=function(){bp.$cctor();return bp.IntGetChecked;};bb.FloatSetUnchecked=function(){bp.$cctor();return bp.FloatSetUnchecked;};bb.FloatGetUnchecked=function(){bp.$cctor();return bp.FloatGetUnchecked;};bb.FloatSetChecked=function(){bp.$cctor();return bp.FloatSetChecked;};bb.FloatGetChecked=function(){bp.$cctor();return bp.FloatGetChecked;};bd=t.Elt=bX.Class({},u,bd);bd.New=function(b0,b1,b2){var b3,b4;b3=_0.CreateElemNode(b0,b1,b2.docNode);b4=bq.Create(b2.updates);return new bd.New$1({$:1,$0:b3},v.Map2Unit(_1.Updates(b3.Attr),b4.v),b0,b4);};bd.New$1=bX.Ctor(function(b0,b1,b2,b3){u.New.call(this,b0,b1);this.docNode$1=b0;this.updates$1=b1;this.elt=b2;this.rvUpdates=b3;},bd);be.notPresent=function(){throw new bJ.New();};bg.convertTextNode=function(b0){var b1,b2,b3,b4,b5,b6;b1=null;b2=0;b4=b0.textContent;b5=new a.RegExp(G.TextHoleRE(),"g");while(b1=b5.exec(b4),b1!==null){b0.parentNode.insertBefore(self.document.createTextNode(bh.string(b4,{$:1,$0:b2},{$:1,$0:b5.lastIndex-N.get(b1,0).length-1})),b0);b2=b5.lastIndex;b6=self.document.createElement("span");b6.setAttribute("ws-replace",N.get(b1,1).toLowerCase());b0.parentNode.insertBefore(b6,b0);}b5.lastIndex=0;b0.textContent=bh.string(b4,{$:1,$0:b2},null);};bg.failNotLoaded=function(b0){bY.warn("Instantiating non-loaded template",b0);};bg.fillTextHole=function(b0,b1,b2){var b3;b3=b0.querySelector("[ws-replace]");return O.Equals(b3,null)?(bY.warn("Filling non-existent text hole",b2),null):(b3.parentNode.replaceChild(self.document.createTextNode(b1),b3),{$:1,$0:b3.getAttribute("ws-replace")});};bg.removeHolesExcept=function(b0,b1){function b2(b3){G.foreachNotPreserved(b0,"["+b3+"]",function(b4){if(!b1.Contains(b4.getAttribute(b3)))b4.removeAttribute(b3);});}b2("ws-attr");b2("ws-onafterrender");b2("ws-var");G.foreachNotPreserved(b0,"[ws-hole]",function(b3){if(!b1.Contains(b3.getAttribute("ws-hole"))){b3.removeAttribute("ws-hole");while(b3.hasChildNodes())b3.removeChild(b3.lastChild);}});G.foreachNotPreserved(b0,"[ws-replace]",function(b3){if(!b1.Contains(b3.getAttribute("ws-replace")))b3.parentNode.removeChild(b3);});G.foreachNotPreserved(b0,"[ws-on]",function(b3){b3.setAttribute("ws-on",m.concat(" ",N.filter(function(b4){return b1.Contains(N.get(m.SplitChars(b4,[":"],1),1));},m.SplitChars(b3.getAttribute("ws-on"),[" "],1))));});G.foreachNotPreserved(b0,"[ws-attr-holes]",function(b3){var b4,b5,b6,b7,b8;b4=m.SplitChars(b3.getAttribute("ws-attr-holes"),[" "],1);for(b5=0,b6=b4.length-1;b5<=b6;b5++){b7=N.get(b4,b5);b3.setAttribute(b7,(b8=new a.RegExp(G.TextHoleRE(),"g"),b3.getAttribute(b7).replace(b8,function(b9,b_){return b1.Contains(b_)?b9:"";})));}});};bg.fillInstanceAttrs=function(b0,b1){var b2,b3,b4,b5,b6;bg.convertAttrs(b1);b2=b1.nodeName.toLowerCase();b3=b0.querySelector("[ws-attr="+b2+"]");if(O.Equals(b3,null))bY.warn("Filling non-existent attr hole",b2);else{b3.removeAttribute("ws-attr");for(b4=0,b5=b1.attributes.length-1;b4<=b5;b4++){b6=b1.attributes.item(b4);if(b6.name=="class"&&b3.hasAttribute("class"))b3.setAttribute("class",b3.getAttribute("class")+" "+b6.nodeValue);else b3.setAttribute(b6.name,b6.nodeValue);}}};bg.mapHoles=function(b0,b1){function b2(b3){G.foreachNotPreserved(b0,"["+b3+"]",function(b4){var b5,b6;b5=(b6=null,[b1.TryGetValue(b4.getAttribute(b3).toLowerCase(),{get:function(){return b6;},set:function(b7){b6=b7;}}),b6]);if(b5[0])b4.setAttribute(b3,b5[1]);});}b2("ws-hole");b2("ws-replace");b2("ws-attr");b2("ws-onafterrender");b2("ws-var");G.foreachNotPreserved(b0,"[ws-on]",function(b3){b3.setAttribute("ws-on",m.concat(" ",N.map(function(b4){var b5,b6,b7;b5=m.SplitChars(b4,[":"],1);b6=(b7=null,[b1.TryGetValue(N.get(b5,1),{get:function(){return b7;},set:function(b8){b7=b8;}}),b7]);return b6[0]?N.get(b5,0)+":"+b6[1]:b4;},m.SplitChars(b3.getAttribute("ws-on"),[" "],1))));});G.foreachNotPreserved(b0,"[ws-attr-holes]",function(b3){var b4,b5,b6;b4=m.SplitChars(b3.getAttribute("ws-attr-holes"),[" "],1);for(b5=0,b6=b4.length-1;b5<=b6;b5++)(function(){var b7;function b8(b9,b_){var b$;b$=e.KeyValue(b_);return b9.replace(new a.RegExp("\\${"+b$[0]+"}","ig"),"${"+b$[1]+"}");}b7=N.get(b4,b5);return b3.setAttribute(b7,(((bX.Curried3(k.fold))(b8))(b3.getAttribute(b7)))(b1));}());});};bg.fill=function(b0,b1,b2){while(true)if(b0.hasChildNodes())b2=b1.insertBefore(b0.lastChild,b2);else return null;};bg.convertAttrs=function(b0){var b2,b3,b4,b5,b6,b7,b8,b9;function b1(b_){var b$;b$=b0.getAttribute(b_);if(b$==null);else b0.setAttribute(b_,b$.toLowerCase());}b2=b0.attributes;b3=[];b4=[];b5=[];for(b6=0,b7=b2.length-1;b6<=b7;b6++){b8=b2.item(b6);if(m.StartsWith(b8.nodeName,"ws-on")&&b8.nodeName!="ws-onafterrender"&&b8.nodeName!="ws-on"){b3.push(b8.nodeName);b4.push(bh.string(b8.nodeName,{$:1,$0:"ws-on".length},null)+":"+b8.nodeValue.toLowerCase());}else!m.StartsWith(b8.nodeName,"ws-")&&(new a.RegExp(G.TextHoleRE())).test(b8.nodeValue)?(b8.nodeValue=(b9=new a.RegExp(G.TextHoleRE(),"g"),b8.nodeValue.replace(b9,function(b_,b$){return"${"+b$.toLowerCase()+"}";})),b5.push(b8.nodeName)):void 0;}if(!(b4.length==0))b0.setAttribute("ws-on",m.concat(" ",b4));if(!(b5.length==0))b0.setAttribute("ws-attr-holes",m.concat(" ",b5));b1("ws-hole");b1("ws-replace");b1("ws-attr");b1("ws-onafterrender");b1("ws-var");N.iter(function(b_){b0.removeAttribute(b_);},b3);};bh.string=function(b0,b1,b2){var b3,b4;return b1==null?b2!=null&&b2.$==1?(b3=b2.$0,b3<0?"":b0.slice(0,b3+1)):"":b2==null?b0.slice(b1.$0):(b4=b2.$0,b4<0?"":b0.slice(b1.$0,b4+1));};k.insufficient=function(){return e.FailWith("The input sequence has an insufficient number of elements.");};k.nonNegative=function(){return e.FailWith("The input must be non-negative.");};bi=W.KeyCollection=bX.Class({GetEnumerator:function(){return q.Get(k.map(function(b0){return b0.K;},this.d));}},r,bi);bi.New=bX.Ctor(function(b0){r.New.call(this);this.d=b0;},bi);bj.get_UseAnimations=function(){return bv.UseAnimations();};bj.Play=function(b0){var b1;b1=null;return bu.Delay(function(){return bu.Bind(bj.Run(a.ignore,bv.Actions(b0)),function(){bv.Finalize(b0);return bu.Return(null);});});};bj.Append=function(b0,b1){return{$:0,$0:bE.Append(b0.$0,b1.$0)};};bj.Run=function(b0,b1){var b2;function b3(b4){function b5(b6){return function(b7){var b8;b8=b7-b6;b1.Compute(b8);b0();return b8<=b2?void a.requestAnimationFrame(function(b9){(b5(b6))(b9);}):b4();};}a.requestAnimationFrame(function(b6){(b5(b6))(b6);});}b2=b1.Duration;return b2===0?bu.Zero():bu.FromContinuations(function(b4,b5,b6){return b3.apply(null,[b4,b5,b6]);});};bj.Concat=function(b0){return{$:0,$0:bE.Concat(k.map(bv.List,b0))};};bj.get_Empty=function(){return{$:0,$0:bE.Empty()};};bk.BatchUpdatesEnabled=function(){bw.$cctor();return bw.BatchUpdatesEnabled;};bl.StartProcessor=function(b0){var b1;function b2(){var b3;b3=null;return bu.Delay(function(){return bu.Bind(b0,function(){var b4;b4=b1[0];return O.Equals(b4,1)?(b1[0]=0,bu.Zero()):O.Equals(b4,2)?(b1[0]=1,b2()):bu.Zero();});});}b1=[0];return function(){var b3;b3=b1[0];if(O.Equals(b3,0)){b1[0]=1;bu.Start(b2(),null);}else O.Equals(b3,1)?b1[0]=2:void 0;};};bm.Int=function(){_8.$cctor();return _8.Int;};A["List`1.Swap"]=function(b0,b1,b2){var b3;b3=N.get(b0,b1);N.set(b0,b1,N.get(b0,b2));N.set(b0,b2,b3);};bo.New=function(b0,b1,b2,b3){var b4;b4={DynElem:b0,DynFlags:b1,DynNodes:b2};bX.SetOptional(b4,"OnAfterRender",b3);return b4;};bp.$cctor=function(){var b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb;bp.$cctor=a.ignore;bp.EmptyAttr=null;bp.BoolCheckedApply=function(cc){function cd(ce,cf){return cf!=null&&cf.$==1?void(ce.checked=cf.$0):null;}return[function(ce){ce.addEventListener("change",function(){return cc.Get()!=ce.checked?cc.Set(ce.checked):null;});},function(ce){return function(cf){return cd(ce,cf);};},v.Map(function(ce){return{$:1,$0:ce};},cc.get_View())];};bp.StringSet=function(cc){return function(cd){cc.value=cd;};};bp.StringGet=function(cc){return{$:1,$0:cc.value};};bp.StringApply=(b0=bb.StringGet(),(b1=bb.StringSet(),function(cc){return bb.ApplyValue(b0,b1,cc);}));bp.DateTimeSetUnchecked=function(cc){return function(cd){cc.value=(new a.Date(cd)).toLocaleString();};};bp.DateTimeGetUnchecked=function(cc){var cd,ce,cf,cg;cd=cc.value;return bz.isBlank(cd)?{$:1,$0:-8640000000000000}:(ce=(cf=0,[(cg=bH.TryParse(cd),cg!=null&&cg.$==1&&(cf=cg.$0,true)),cf]),ce[0]?{$:1,$0:ce[1]}:null);};bp.DateTimeApplyUnchecked=(b2=bb.DateTimeGetUnchecked(),(b3=bb.DateTimeSetUnchecked(),function(cc){return bb.ApplyValue(b2,b3,cc);}));bp.FileSetUnchecked=function(){return function(){return null;};};bp.FileGetUnchecked=function(cc){var cd;cd=cc.files;return{$:1,$0:N.ofSeq(k.delay(function(){return k.map(function(ce){return cd.item(ce);},e.range(0,cd.length-1));}))};};bp.FileApplyUnchecked=(b4=bb.FileGetUnchecked(),(b5=bb.FileSetUnchecked(),function(cc){return bb.FileApplyValue(b4,b5,cc);}));bp.IntSetUnchecked=function(cc){return function(cd){cc.value=a.String(cd);};};bp.IntGetUnchecked=function(cc){var cd,ce;cd=cc.value;return bz.isBlank(cd)?{$:1,$0:0}:(ce=+cd,ce!==ce>>0?null:{$:1,$0:ce});};bp.IntApplyUnchecked=(b6=bb.IntGetUnchecked(),(b7=bb.IntSetUnchecked(),function(cc){return bb.ApplyValue(b6,b7,cc);}));bp.IntSetChecked=function(cc){return function(cd){var ce;ce=cd.get_Input();return cc.value!=ce?void(cc.value=ce):null;};};bp.IntGetChecked=function(cc){var cd,ce,cf;cd=cc.value;return{$:1,$0:bz.isBlank(cd)?(cc.checkValidity?cc.checkValidity():true)?new bA({$:2,$0:cd}):new bA({$:1,$0:cd}):(ce=(cf=0,[Z.TryParseInt32(cd,{get:function(){return cf;},set:function(cg){cf=cg;}}),cf]),ce[0]?new bA({$:0,$0:ce[1],$1:cd}):new bA({$:1,$0:cd}))};};bp.IntApplyChecked=(b8=bb.IntGetChecked(),(b9=bb.IntSetChecked(),function(cc){return bb.ApplyValue(b8,b9,cc);}));bp.FloatSetUnchecked=function(cc){return function(cd){cc.value=a.String(cd);};};bp.FloatGetUnchecked=function(cc){var cd,ce;cd=cc.value;return bz.isBlank(cd)?{$:1,$0:0}:(ce=+cd,a.isNaN(ce)?null:{$:1,$0:ce});};bp.FloatApplyUnchecked=(b_=bb.FloatGetUnchecked(),(b$=bb.FloatSetUnchecked(),function(cc){return bb.ApplyValue(b_,b$,cc);}));bp.FloatSetChecked=function(cc){return function(cd){var ce;ce=cd.get_Input();return cc.value!=ce?void(cc.value=ce):null;};};bp.FloatGetChecked=function(cc){var cd,ce;cd=cc.value;return{$:1,$0:bz.isBlank(cd)?(cc.checkValidity?cc.checkValidity():true)?new bA({$:2,$0:cd}):new bA({$:1,$0:cd}):(ce=+cd,a.isNaN(ce)?new bA({$:1,$0:cd}):new bA({$:0,$0:ce,$1:cd}))};};bp.FloatApplyChecked=(ca=bb.FloatGetChecked(),(cb=bb.FloatSetChecked(),function(cc){return bb.ApplyValue(ca,cb,cc);}));};bq=t.Updates=bX.Class({},null,bq);bq.Create=function(b0){var b1;b1=null;b1=bq.New(b0,null,function(){var b2;b2=b1.s;return b2===null?(b2=P.Copy(b1.c()),b1.s=b2,P.WhenObsoleteRun(b2,function(){b1.s=null;}),b2):b2;});return b1;};bq.New=function(b0,b1,b2){return new bq({c:b0,s:b1,v:b2});};bs.New=function(b0,b1){return{PreviousNodes:b0,Top:b1};};bt.get_Empty=function(){return{$:0,$0:new _6.New$3()};};bt.FindAll=function(b0){var b1;function b2(b5,b6){var b7,b8,b9,b_,b$;while(true)switch(b5){case 0:if(b6!=null&&b6.$==0){b8=b6.$1;b9=b6.$0;b2(0,b9);b6=b8;}else if(b6!=null&&b6.$==1){b_=b6.$0;b6=b_;b5=1;}else if(b6!=null&&b6.$==2){b$=b6.$0;b6=b$.Current;}else return b6!=null&&b6.$==6?(b7=b6.$0.Holes,(function(ca){return function(cb){N.iter(ca,cb);};}(b4))(b7)):null;break;case 1:b1.push(b6);b6=b6.Children;b5=0;break;}}function b3(b5){return b2(0,b5);}function b4(b5){return b2(1,b5);}b1=[];b3(b0);return{$:0,$0:new _6.New$2(b1)};};bt.Filter=function(b0,b1){return{$:0,$0:bP.Filter(b0,b1.$0)};};bt.Except=function(b0,b1){return{$:0,$0:bP.Except(b0.$0,b1.$0)};};bt.ToArray=function(b0){return bP.ToArray(b0.$0);};bt.Intersect=function(b0,b1){return{$:0,$0:bP.Intersect(b0.$0,b1.$0)};};bu.Delay=function(b0){return function(b1){try{(b0(null))(b1);}catch(b2){b1.k({$:1,$0:b2});}};};bu.Bind=function(b0,b1){return bu.checkCancel(function(b2){b0(bM.New(function(b3){var b4;if(b3.$==0){b4=b3.$0;bu.scheduler().Fork(function(){try{(b1(b4))(b2);}catch(b5){b2.k({$:1,$0:b5});}});}else bu.scheduler().Fork(function(){b2.k(b3);});},b2.ct));});};bu.Zero=function(){bN.$cctor();return bN.Zero;};bu.Start=function(b0,b1){var b2,b3;b2=(b3=(bu.defCTS())[0],b1==null?b3:b1.$0);bu.scheduler().Fork(function(){if(!b2.c)b0(bM.New(function(b4){if(b4.$==1)bu.UncaughtAsyncError(b4.$0);},b2));});};bu.Return=function(b0){return function(b1){b1.k({$:0,$0:b0});};};bu.scheduler=function(){bN.$cctor();return bN.scheduler;};bu.checkCancel=function(b0){return function(b1){if(b1.ct.c)bu.cancel(b1);else b0(b1);};};bu.defCTS=function(){bN.$cctor();return bN.defCTS;};bu.UncaughtAsyncError=function(b0){bY.log("WebSharper: Uncaught asynchronous exception",b0);};bu.FromContinuations=function(b0){return function(b1){var b2;function b3(b4){if(b2[0])e.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{b2[0]=true;bu.scheduler().Fork(b4);}}b2=[false];b0(function(b4){b3(function(){b1.k({$:0,$0:b4});});},function(b4){b3(function(){b1.k({$:1,$0:b4});});},function(b4){b3(function(){b1.k({$:2,$0:b4});});});};};bu.cancel=function(b0){b0.k({$:2,$0:new bS.New(b0.ct)});};bv.UseAnimations=function(){bD.$cctor();return bD.UseAnimations;};bv.Actions=function(b0){return bv.ConcatActions(N.choose(function(b1){return b1.$==1?{$:1,$0:b1.$0}:null;},bE.ToArray(b0.$0)));};bv.Finalize=function(b0){N.iter(function(b1){if(b1.$==0)b1.$0();},bE.ToArray(b0.$0));};bv.ConcatActions=function(b0){var b1,b2,b3,b4;b1=_4.ofSeqNonCopying(b0);b2=N.length(b1);return b2===0?bv.Const():b2===1?N.get(b1,0):(b3=k.max(k.map(function(b5){return b5.Duration;},b1)),(b4=N.map(function(b5){return bv.Prolong(b3,b5);},b1),bv.Def(b3,function(b5){N.iter(function(b6){b6.Compute(b5);},b4);})));};bv.List=function(b0){return b0.$0;};bv.Const=function(b0){return bv.Def(0,function(){return b0;});};bv.Def=function(b0,b1){return{Compute:b1,Duration:b0};};bv.Prolong=function(b0,b1){var b2,b3,b4;b2=b1.Compute;b3=b1.Duration;b4=bT.Create(function(){return b1.Compute(b1.Duration);});return{Compute:function(b5){return b5>=b3?b4.f():b2(b5);},Duration:b0};};bw.$cctor=function(){bw.$cctor=a.ignore;bw.BatchUpdatesEnabled=true;};bx.$cctor=function(){bx.$cctor=a.ignore;bx.counter=0;};by.Clear=function(b0){b0.splice(0,N.length(b0));};bz.isBlank=function(b0){return m.forall(bG.IsWhiteSpace,b0);};bA=t.CheckedInput=bX.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,bA);bB=t.DynamicAttrNode=bX.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(b0){return bj.get_Empty();},NGetEnterAnim:function(b0){return bj.get_Empty();},NGetChangeAnim:function(b0){return bj.get_Empty();},NSync:function(b0){if(this.dirty){(this.push(b0))(this.value);this.dirty=false;}}},r,bB);bB.New=bX.Ctor(function(b0,b1){var b2;b2=this;r.New.call(this);this.push=b1;this.value=void 0;this.dirty=false;this.updates=v.Map(function(b3){b2.value=b3;b2.dirty=true;},b0);},bB);bC.$cctor=function(){var b0;bC.$cctor=a.ignore;bC.rxhtmlTag=new a.RegExp("<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>","gi");bC.rtagName=new a.RegExp("<([\\w:]+)");bC.rhtml=new a.RegExp("<|&#?\\w+;");bC.wrapMap=(b0=[1,"<table>","</table>"],{option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:b0,tbody:b0,tfoot:b0,tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><colgroup>","</colgoup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"]});bC.defaultWrap=[0,"",""];};bD.$cctor=function(){bD.$cctor=a.ignore;bD.CubicInOut=bL.Custom(function(b0){var b1;b1=b0*b0;return 3*b1-2*(b1*b0);});bD.UseAnimations=true;};bE.Append=function(b0,b1){return b0.$==0?b1:b1.$==0?b0:{$:2,$0:b0,$1:b1};};bE.ToArray=function(b0){var b1;function b2(b3){var b4,b5;while(true)if(b3.$==1)return b1.push(b3.$0);else if(b3.$==2){b4=b3.$1;b5=b3.$0;b2(b5);b3=b4;}else return b3.$==3?N.iter(function(b6){b1.push(b6);},b3.$0):null;}b1=[];b2(b0);return b1.slice(0);};bE.Concat=function(b0){var b1;b1=_4.ofSeqNonCopying(b0);return _4.TreeReduce(bE.Empty(),bE.Append,b1);};bE.Empty=function(){bU.$cctor();return bU.Empty;};bF.concat=function(b0){var b1,b2;b1=[];for(var b3 in b0)b1.push.apply(b1,b0[b3]);return b1;};bG.IsWhiteSpace=function(b0){return b0.match(new a.RegExp("\\s"))!==null;};bH.TryParse=function(b0){var b1;b1=bZ.parse(b0);return a.isNaN(b1)?null:{$:1,$0:b1};};Z.TryParse=function(b0,b1,b2,b3){var b4,b5;b4=+b0;b5=b4===b4-b4%1&&b4>=b1&&b4<=b2;if(b5)b3.set(b4);return b5;};bJ=d.KeyNotFoundException=bX.Class({},bI,bJ);bJ.New=bX.Ctor(function(){bJ.New$1.call(this,"The given key was not present in the dictionary.");},bJ);bJ.New$1=bX.Ctor(function(b0){this.message=b0;bc.setPrototypeOf(this,bJ.prototype);},bJ);bK=bu.Scheduler=bX.Class({Fork:function(b0){var b1;b1=this;this.robin.push(b0);if(this.idle){this.idle=false;a.setTimeout(function(){b1.tick();},0);}},tick:function(){var b0,b1,b2;b1=this;b2=bZ.now();b0=true;while(b0)if(this.robin.length===0){this.idle=true;b0=false;}else{(this.robin.shift())();bZ.now()-b2>40?(a.setTimeout(function(){b1.tick();},0),b0=false):void 0;}}},r,bK);bK.New=bX.Ctor(function(){r.New.call(this);this.idle=true;this.robin=[];},bK);bL=t.Easing=bX.Class({},r,bL);bL.Custom=function(b0){return new bL.New(b0);};bL.New=bX.Ctor(function(b0){r.New.call(this);this.transformTime=b0;},bL);bM.New=function(b0,b1){return{k:b0,ct:b1};};bN.$cctor=function(){bN.$cctor=a.ignore;bN.noneCT=bO.New(false,[]);bN.scheduler=new bK.New();bN.defCTS=[new bQ.New()];bN.Zero=bu.Return();bN.GetCT=function(b0){b0.k({$:0,$0:b0.ct});};};bO.New=function(b0,b1){return{c:b0,r:b1};};bP.Filter=function(b0,b1){return new _6.New$2(N.filter(b0,bP.ToArray(b1)));};bP.Except=function(b0,b1){var b2;b2=new _6.New$2(bP.ToArray(b1));b2.ExceptWith(bP.ToArray(b0));return b2;};bP.ToArray=function(b0){var b1;b1=N.create(b0.Count(),void 0);b0.CopyTo(b1,0);return b1;};bP.Intersect=function(b0,b1){var b2;b2=new _6.New$2(bP.ToArray(b0));b2.IntersectWith(bP.ToArray(b1));return b2;};bQ=d.CancellationTokenSource=bX.Class({},r,bQ);bQ.New=bX.Ctor(function(){r.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bQ);bR.Children=function(b0,b1){var b2,b3,b4;if(b1!=null&&b1.$==1){b4=[];b2=b1.$0[0].nextSibling;while(b2!==b1.$0[1]){b4.push(b2);b2=b2.nextSibling;}return{$:0,$0:b4};}else return{$:0,$0:N.init(b0.childNodes.length,(b3=b0.childNodes,function(b5){return b3[b5];}))};};bR.Except=function(b0,b1){var b2;b2=b0.$0;return{$:0,$0:N.filter(function(b3){return N.forall(function(b4){return!(b3===b4);},b2);},b1.$0)};};bR.Iter=function(b0,b1){N.iter(b0,b1.$0);};bR.DocChildren=function(b0){var b1;function b2(b3){var b4,b5,b6,b7;while(true){if(b3!=null&&b3.$==2){b5=b3.$0;b3=b5.Current;}else if(b3!=null&&b3.$==1)return b1.push(b3.$0.El);else if(b3==null)return null;else if(b3!=null&&b3.$==5)return b1.push(b3.$0);else if(b3!=null&&b3.$==4)return b1.push(b3.$0.Text);else if(b3!=null&&b3.$==6){b4=b3.$0.Els;return(function(b8){return function(b9){N.iter(b8,b9);};}(function(b8){if(b8==null||b8.constructor===bc)b2(b8);else b1.push(b8);}))(b4);}else{b6=b3.$1;b7=b3.$0;b2(b7);b3=b6;}}}b1=[];b2(b0.Children);return{$:0,$0:_4.ofSeqNonCopying(b1)};};bS=d.OperationCanceledException=bX.Class({},bI,bS);bS.New=bX.Ctor(function(b0){bS.New$1.call(this,"The operation was canceled.",null,b0);},bS);bS.New$1=bX.Ctor(function(b0,b1,b2){this.message=b0;this.inner=b1;bc.setPrototypeOf(this,bS.prototype);this.ct=b2;},bS);bT.Create=function(b0){return bW.New(false,b0,bT.forceLazy);};bT.forceLazy=function(){var b0;b0=this.v();this.c=true;this.v=b0;this.f=bT.cachedLazy;return b0;};bT.cachedLazy=function(){return this.v;};bU.$cctor=function(){bU.$cctor=a.ignore;bU.Empty={$:0};};bW.New=function(b0,b1,b2){return{c:b0,v:b1,f:b2};};bX.OnLoad(function(){c.FinalForm();});}(self));


if (typeof WebSharper !=='undefined') {
  WebSharper.Runtime.ScriptBasePath = '/Content/';
  WebSharper.Runtime.Start();
}
